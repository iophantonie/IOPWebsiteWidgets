<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOP Trait & Gen Wiki</title>
    <link href="https://fonts.googleapis.com/css2?family=Acme&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Farben und Schriftarten - IOP Style */
        :root {
            --color-red: #E53935;
            --color-dark: rgba(20, 20, 20, 0.95);
            --color-light-dark: rgba(40, 40, 40, 0.9);
            --color-text: #f7f7f7;
            --color-gold: #FFEB3B;
            --color-stat: #4CAF50; /* Gr√ºn f√ºr Stats/Attribute */
            --color-combat: #F44336; /* Rot f√ºr Kampf */
            --color-utility: #2196F3; /* Blau f√ºr Utility */
            --color-breeding: #9C27B0; /* Lila f√ºr Zucht */
            
            --font-main: sans-serif;
            --font-header: 'Acme', sans-serif;
        }

        * { box-sizing: border-box; }

        body {
            background-color: transparent;
            font-family: var(--font-main);
            color: var(--color-text);
            margin: 0;
            padding: 5px; 
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden; 
        }

        /* Container */
        .wiki-container {
            background-color: var(--color-dark);
            border-radius: 12px;
            border: 2px solid var(--color-red);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.8);
            width: 100%;
            max-width: 1600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: 98%; 
            max-height: 98vh;
            position: relative;
        }

        /* Header */
        .wiki-header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            text-align: center;
            border-bottom: 2px solid var(--color-red);
            flex-shrink: 0;
            position: relative;
        }

        .wiki-title {
            font-family: var(--font-header);
            font-size: 1.6rem; 
            color: var(--color-red);
            text-transform: uppercase;
            margin: 5px 0 10px 0;
            text-shadow: 0 0 10px rgba(229, 57, 53, 0.4);
        }

        /* FLAGGEN SWITCHER (Ersetzt Sortier Buttons) */
        .lang-switch {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
        }
        .lang-btn {
            width: 30px; height: 20px;
            cursor: pointer;
            border-radius: 3px;
            border: 1px solid #fff;
            opacity: 0.5;
            transition: transform 0.2s, opacity 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            padding: 0;
            display: block;
        }
        .lang-btn:hover, .lang-btn.active {
            opacity: 1; transform: scale(1.15);
            border-color: var(--color-red);
            z-index: 10;
        }

        /* Responsive Header */
        @media (max-width: 600px) {
            .wiki-header {
                display: flex;
                flex-direction: column;
            }
            .lang-switch {
                position: static;
                justify-content: center;
                margin-bottom: 5px;
                order: -1; 
                align-self: center;
            }
            .wiki-title {
                margin-top: 0;
            }
        }

        /* Controls: Suche & Filter */
        .controls-area {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 5px;
        }

        .search-wrapper {
            position: relative;
            flex-grow: 1;
            width: 100%; 
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 8px 15px 8px 35px;
            border-radius: 8px;
            border: 2px solid #555;
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 0.9rem;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-red);
        }

        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            font-size: 0.8rem;
        }

        /* Filter Buttons */
        .filter-group {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
        }

        .filter-btn {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ccc;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-family: var(--font-header);
            text-transform: uppercase;
            font-size: 0.85rem;
            transition: all 0.2s;
            flex: 1; 
            min-width: 60px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .filter-btn i { font-size: 0.95rem; }

        .filter-btn:hover {
            background-color: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .filter-btn.active {
            background-color: var(--color-red);
            border-color: var(--color-red);
            color: #fff;
            box-shadow: 0 0 10px rgba(229, 57, 53, 0.4);
        }

        @media (max-width: 500px) {
            .filter-btn {
                padding: 6px 8px;
                font-size: 0.75rem;
                gap: 4px;
            }
        }

        /* Content Grid */
        .grid-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 15px;
            align-content: start; 
            scrollbar-width: thin;
            scrollbar-color: var(--color-red) transparent;
        }

        .grid-container::-webkit-scrollbar { width: 6px; }
        .grid-container::-webkit-scrollbar-thumb { background-color: var(--color-red); border-radius: 3px; }

        /* Trait Card */
        .trait-card {
            background-color: var(--color-light-dark);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            height: 100%; 
            overflow: visible;
        }

        .trait-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            border-color: var(--color-gold);
        }

        .trait-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: #555;
            border-top-left-radius: 8px;
            border-bottom-left-radius: 8px;
        }

        .trait-card[data-cat="Kampf"]::before { background-color: var(--color-combat); }
        .trait-card[data-cat="Attribute"]::before { background-color: var(--color-stat); }
        .trait-card[data-cat="Utility"]::before { background-color: var(--color-utility); }
        .trait-card[data-cat="Zucht"]::before { background-color: var(--color-breeding); }

        .card-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 8px;
            margin-bottom: 0;
        }

        .trait-name-container {
            display: flex;
            flex-direction: column;
            width: 85%;
        }

        .trait-name-primary {
            font-family: var(--font-header);
            font-size: 1.25rem;
            color: #fff;
            font-weight: 700;
            line-height: 1.2;
        }
        
        .trait-name-secondary {
            color: #aaa;
            font-size: 0.85rem;
            font-family: var(--font-main);
            font-weight: normal;
            font-style: italic;
            margin-top: 2px;
        }

        .trait-icon {
            font-size: 1.3rem;
            color: var(--color-gold);
            margin-top: 2px;
        }

        .trait-desc {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #ddd;
            flex-grow: 1; 
        }

        .values-box {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            padding: 10px;
            font-size: 0.85rem;
            margin-top: auto;
        }

        .value-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
            padding-bottom: 2px;
        }
        .value-row:last-child { border-bottom: none; margin-bottom: 0; }

        .tier-label { color: #aaa; }
        .tier-val { color: var(--color-gold); font-weight: bold; }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 5px;
            font-size: 0.75rem;
            padding-top: 5px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stack-info span { color: var(--color-red); font-weight: bold; }
        
        .tag {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            background-color: rgba(255,255,255,0.1);
            color: #aaa;
            text-transform: uppercase;
        }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 30px;
            font-size: 1.2rem;
            color: #666;
            font-family: var(--font-header);
        }
    </style>
</head>
<body>

    <div class="wiki-container">
        
        <div class="wiki-header">
            <!-- 4 Flaggen -->
            <div class="lang-switch">
                <svg class="lang-btn active" id="btn-de" onclick="setLang('de')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5 3">
                    <rect width="5" height="3" fill="#000"/><rect width="5" height="2" y="1" fill="#D00"/><rect width="5" height="1" y="2" fill="#FFCE00"/>
                </svg>
                <svg class="lang-btn" id="btn-en" onclick="setLang('en')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30">
                    <clipPath id="s"><path d="M0,0 v30 h60 v-30 z"/></clipPath>
                    <clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath>
                    <g clip-path="url(#s)">
                        <path d="M0,0 v30 h60 v-30 z" fill="#012169"/>
                        <path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/>
                        <path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#C8102E" stroke-width="4"/>
                        <path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/>
                        <path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/>
                    </g>
                </svg>
                <svg class="lang-btn" id="btn-es" onclick="setLang('es')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 500">
                    <rect width="750" height="500" fill="#AA151B"/>
                    <rect width="750" height="250" y="125" fill="#F1BF00"/>
                </svg>
                <svg class="lang-btn" id="btn-fr" onclick="setLang('fr')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
                    <rect width="900" height="600" fill="#ED2939"/>
                    <rect width="600" height="600" fill="#fff"/>
                    <rect width="300" height="600" fill="#002395"/>
                </svg>
            </div>

            <h1 class="wiki-title" id="mainTitle">üß¨ Gen & Trait Wiki</h1>
            
            <div class="controls-area">
                <div class="search-wrapper">
                    <i class="fa-solid fa-search search-icon"></i>
                    <input type="text" id="searchInput" class="search-input" placeholder="Suche...">
                </div>

                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all" id="filter-all">
                        <i class="fa-solid fa-layer-group"></i> <span>Alle</span>
                    </button>
                    <button class="filter-btn" data-filter="Kampf" id="filter-combat">
                        <i class="fa-solid fa-skull"></i> <span>Kampf</span>
                    </button>
                    <button class="filter-btn" data-filter="Utility" id="filter-utility">
                        <i class="fa-solid fa-toolbox"></i> <span>Utility</span>
                    </button>
                    <button class="filter-btn" data-filter="Attribute" id="filter-stats">
                        <i class="fa-solid fa-chart-bar"></i> <span>Stats</span>
                    </button>
                    <button class="filter-btn" data-filter="Zucht" id="filter-breed">
                        <i class="fa-solid fa-dna"></i> <span>Zucht</span>
                    </button>
                </div>
            </div>
        </div>

        <div id="contentGrid" class="grid-container">
            <!-- Content generated by JS -->
        </div>

    </div>

    <script>
        // --- TEXT CONSTANTS ---
        const UI_TEXT = {
            de: { title: "üß¨ Gen & Trait Wiki", search: "Suche...", all: "Alle", combat: "Kampf", utility: "Utility", stats: "Attribute", breed: "Zucht", stack: "Max. Stapel:", no_res: "Keine Gene gefunden... vielleicht neu z√ºchten? üß¨" },
            en: { title: "üß¨ Gene & Trait Wiki", search: "Search...", all: "All", combat: "Combat", utility: "Utility", stats: "Stats", breed: "Breeding", stack: "Max Stacks:", no_res: "No traits found... maybe breed more? üß¨" },
            es: { title: "üß¨ Wiki de Genes", search: "Buscar...", all: "Todos", combat: "Combate", utility: "Utilidad", stats: "Atributos", breed: "Crianza", stack: "Pilas M√°x:", no_res: "No se encontraron rasgos... ¬øcriar m√°s? üß¨" },
            fr: { title: "üß¨ Wiki G√®nes & Traits", search: "Rechercher...", all: "Tous", combat: "Combat", utility: "Utilitaire", stats: "Stats", breed: "√âlevage", stack: "Max Piles :", no_res: "Aucun trait trouv√©... peut-√™tre √©lever plus ? üß¨" }
        };

        const CAT_TRANS = {
            "Kampf": { de: "Kampf", en: "Combat", es: "Combate", fr: "Combat" },
            "Utility": { de: "Utility", en: "Utility", es: "Utilidad", fr: "Utilitaire" },
            "Attribute": { de: "Attribute", en: "Stats", es: "Atributos", fr: "Stats" },
            "Zucht": { de: "Zucht", en: "Breeding", es: "Crianza", fr: "√âlevage" }
        };

        // --- TRAIT DATABASE (Extended) ---
        const traitData = [
            {
                id: "aggro", category: "Kampf", stack: 2, icon: "fa-bolt",
                name: { de: "Aggressiv", en: "Aggressive", es: "Agresivo", fr: "Agressif" },
                desc: { de: "Wenn diese Kreatur Schaden verursacht, erh√§lt sie einen Bewegungsgeschwindigkeits-Buff f√ºr 5 Sekunden.", en: "When dealing damage, gain a movement speed buff for 5 seconds.", es: "Al infligir da√±o, gana velocidad de movimiento por 5s.", fr: "En infligeant des d√©g√¢ts, gagne un bonus de vitesse pendant 5s." },
                t1: { de: "2.5% Speed", en: "2.5% Speed", es: "2.5% Vel", fr: "2.5% Vit" },
                t2: { de: "3.75% Speed", en: "3.75% Speed", es: "3.75% Vel", fr: "3.75% Vit" },
                t3: { de: "5.0% Speed", en: "5.0% Speed", es: "5.0% Vel", fr: "5.0% Vit" }
            },
            {
                id: "angry", category: "Kampf", stack: 2, icon: "fa-face-angry",
                name: { de: "W√ºtend", en: "Angry", es: "Enojado", fr: "En Col√®re" },
                desc: { de: "Verursacht mehr Schaden basierend auf der aktuellen Gesundheit (Bonus beginnt bei 50% HP).", en: "Deals more damage based on missing health (starts at 50% HP).", es: "M√°s da√±o seg√∫n salud faltante (inicia al 50% HP).", fr: "Inflige plus de d√©g√¢ts selon la sant√© manquante (d√©bute √† 50% PV)." },
                t1: { de: "1.25% Dmg", en: "1.25% Dmg", es: "1.25% Da√±o", fr: "1.25% D√©g" },
                t2: { de: "1.875% Dmg", en: "1.875% Dmg", es: "1.875% Da√±o", fr: "1.875% D√©g" },
                t3: { de: "2.5% Dmg", en: "2.5% Dmg", es: "2.5% Da√±o", fr: "2.5% D√©g" }
            },
            {
                id: "frenzy", category: "Kampf", stack: 3, icon: "fa-fire",
                name: { de: "Blutrausch", en: "Frenzy", es: "Frenes√≠", fr: "Fr√©n√©sie" },
                desc: { de: "Erh√∂ht Schaden und Geschwindigkeit nach einem Kill kurzzeitig.", en: "Increases damage and speed briefly after a kill.", es: "Aumenta da√±o y velocidad tras una muerte.", fr: "Augmente d√©g√¢ts et vitesse apr√®s un kill." },
                t1: { de: "10% Dmg/Speed", en: "10% Dmg/Speed", es: "10% Da√±o/Vel", fr: "10% D√©g/Vit" },
                t2: { de: "15% Dmg/Speed", en: "15% Dmg/Speed", es: "15% Da√±o/Vel", fr: "15% D√©g/Vit" },
                t3: { de: "20% Dmg/Speed", en: "20% Dmg/Speed", es: "20% Da√±o/Vel", fr: "20% D√©g/Vit" }
            },
            {
                id: "giant", category: "Kampf", stack: 2, icon: "fa-axe",
                name: { de: "Riesent√∂ter", en: "Giantslaying", es: "Matagigantes", fr: "Tueur de G√©ants" },
                desc: { de: "Mehr Schaden gegen gro√üe Kreaturen (>500 Drag Weight), weniger gegen kleine (<200).", en: "More damage vs large creatures (>500 Drag Weight), less vs small (<200).", es: "M√°s da√±o vs grandes (>500 peso), menos vs peque√±os.", fr: "Plus de d√©g√¢ts vs grandes cr√©atures (>500 poids), moins vs petites." },
                t1: { de: "+2.5% Large / -7.5% Small", en: "+2.5% Large / -7.5% Small", es: "+2.5% Grande / -7.5% Peque", fr: "+2.5% Grand / -7.5% Petit" },
                t2: { de: "+3.75% Large / -11.25% Small", en: "+3.75% Large / -11.25% Small", es: "+3.75% Grande / -11.25% Peque", fr: "+3.75% Grand / -11.25% Petit" },
                t3: { de: "+5.0% Large / -15.0% Small", en: "+5.0% Large / -15.0% Small", es: "+5.0% Grande / -15.0% Peque", fr: "+5.0% Grand / -15.0% Petit" }
            },
            {
                id: "heavy", category: "Kampf", stack: 3, icon: "fa-hammer",
                name: { de: "Wuchtschlag", en: "Heavy-Hitting", es: "Golpe Pesado", fr: "Frappe Lourde" },
                desc: { de: "Verursacht mehr Nahkampfschaden, hat aber eine verringerte Angriffsgeschwindigkeit.", en: "Deals more melee damage but has reduced attack speed.", es: "M√°s da√±o cuerpo a cuerpo pero ataque m√°s lento.", fr: "Plus de d√©g√¢ts de m√™l√©e mais vitesse d'attaque r√©duite." },
                t1: { de: "+2.5% Dmg / -5% Speed", en: "+2.5% Dmg / -5% Speed", es: "+2.5% Da√±o / -5% Vel", fr: "+2.5% D√©g / -5% Vit" },
                t2: { de: "+3.75% Dmg / -7.5% Speed", en: "+3.75% Dmg / -7.5% Speed", es: "+3.75% Da√±o / -7.5% Vel", fr: "+3.75% D√©g / -7.5% Vit" },
                t3: { de: "+5.0% Dmg / -10% Speed", en: "+5.0% Dmg / -10% Speed", es: "+5.0% Da√±o / -10% Vel", fr: "+5.0% D√©g / -10% Vit" }
            },
            {
                id: "king", category: "Kampf", stack: 3, icon: "fa-crown",
                name: { de: "K√∂nigsm√∂rder", en: "Kingslaying", es: "Matarrayes", fr: "R√©gicide" },
                desc: { de: "Erh√∂hter Schaden gegen Bosse und Alphas, verringerter Schaden gegen alle anderen.", en: "Increased damage vs Bosses/Alphas, reduced vs others.", es: "M√°s da√±o vs Jefes/Alphas, menos vs otros.", fr: "D√©g√¢ts accrus vs Boss/Alphas, r√©duits vs autres." },
                t1: { de: "+5% Boss / -10% Andere", en: "+5% Boss / -10% Others", es: "+5% Jefe / -10% Otros", fr: "+5% Boss / -10% Autres" },
                t2: { de: "+7.5% Boss / -15% Andere", en: "+7.5% Boss / -15% Others", es: "+7.5% Jefe / -15% Otros", fr: "+7.5% Boss / -15% Autres" },
                t3: { de: "+10% Boss / -20% Andere", en: "+10% Boss / -20% Others", es: "+10% Jefe / -20% Otros", fr: "+10% Boss / -20% Autres" }
            },
            {
                id: "numb", category: "Kampf", stack: 1, icon: "fa-capsules",
                name: { de: "Taub", en: "Numb", es: "Adormecido", fr: "Engourdi" },
                desc: { de: "Ein Teil des erlittenen Schadens wird in Schaden √ºber Zeit (DoT) umgewandelt.", en: "Part of incoming damage is converted to Damage over Time (DoT).", es: "Parte del da√±o recibido se convierte en da√±o por tiempo (DoT).", fr: "Une partie des d√©g√¢ts re√ßus est convertie en d√©g√¢ts sur la dur√©e (DoT)." },
                t1: { de: "25% DoT", en: "25% DoT", es: "25% DoT", fr: "25% DoT" },
                t2: { de: "37.5% DoT", en: "37.5% DoT", es: "37.5% DoT", fr: "37.5% DoT" },
                t3: { de: "50.0% DoT", en: "50.0% DoT", es: "50.0% DoT", fr: "50.0% DoT" }
            },
            {
                id: "prot", category: "Kampf", stack: 2, icon: "fa-user-shield",
                name: { de: "Besch√ºtzend", en: "Protective", es: "Protector", fr: "Protecteur" },
                desc: { de: "Reduziert den Schaden, den der Reiter erleidet.", en: "Reduces damage taken by the rider.", es: "Reduce el da√±o recibido por el jinete.", fr: "R√©duit les d√©g√¢ts subis par le cavalier." },
                t1: { de: "-15% Rider Dmg", en: "-15% Rider Dmg", es: "-15% Da√±o Jinete", fr: "-15% D√©gats Cavalier" },
                t2: { de: "-22.5% Rider Dmg", en: "-22.5% Rider Dmg", es: "-22.5% Da√±o Jinete", fr: "-22.5% D√©gats Cavalier" },
                t3: { de: "-30% Rider Dmg", en: "-30% Rider Dmg", es: "-30% Da√±o Jinete", fr: "-30% D√©gats Cavalier" }
            },
            {
                id: "quick", category: "Kampf", stack: 3, icon: "fa-wind",
                name: { de: "Flinkschlag", en: "Quick-Hitting", es: "Golpe R√°pido", fr: "Frappe Rapide" },
                desc: { de: "Greift schneller an, verursacht aber weniger Nahkampfschaden.", en: "Attacks faster but deals less melee damage.", es: "Ataca m√°s r√°pido pero menos da√±o.", fr: "Attaque plus vite mais moins de d√©g√¢ts." },
                t1: { de: "+2.5% Speed / -5% Dmg", en: "+2.5% Speed / -5% Dmg", es: "+2.5% Vel / -5% Da√±o", fr: "+2.5% Vit / -5% D√©g" },
                t2: { de: "+3.75% Speed / -7.5% Dmg", en: "+3.75% Speed / -7.5% Dmg", es: "+3.75% Vel / -7.5% Da√±o", fr: "+3.75% Vit / -7.5% D√©g" },
                t3: { de: "+5.0% Speed / -10% Dmg", en: "+5.0% Speed / -10% Dmg", es: "+5.0% Vel / -10% Da√±o", fr: "+5.0% Vit / -10% D√©g" }
            },
            {
                id: "tenacious", category: "Kampf", stack: 3, icon: "fa-heart-pulse",
                name: { de: "Z√§h", en: "Tenacious", es: "Tenaz", fr: "Tenace" },
                desc: { de: "Nimmt weniger Schaden basierend auf aktueller Gesundheit (Effekt startet bei 50% HP).", en: "Takes less damage based on current health (starts at 50% HP).", es: "Menos da√±o recibido seg√∫n salud (inicia al 50%).", fr: "Subit moins de d√©g√¢ts selon la sant√© (d√©bute √† 50%)." },
                t1: { de: "-12.5% Dmg", en: "-12.5% Dmg", es: "-12.5% Da√±o", fr: "-12.5% D√©g" },
                t2: { de: "-18.75% Dmg", en: "-18.75% Dmg", es: "-18.75% Da√±o", fr: "-18.75% D√©g" },
                t3: { de: "-25.0% Dmg", en: "-25.0% Dmg", es: "-25.0% Da√±o", fr: "-25.0% D√©g" }
            },
            {
                id: "vamp", category: "Kampf", stack: 1, icon: "fa-droplet",
                name: { de: "Vampirisch", en: "Vampiric", es: "Vamp√≠rico", fr: "Vampirique" },
                desc: { de: "Heilt den Dino um einen Prozentsatz des verursachten Schadens (Lifesteal).", en: "Heals dino for a percentage of damage dealt (Lifesteal).", es: "Cura al dino un porcentaje del da√±o (Robo de vida).", fr: "Soigne le dino d'un pourcentage des d√©g√¢ts (Vol de vie)." },
                t1: { de: "5% Lifesteal", en: "5% Lifesteal", es: "5% Robo de vida", fr: "5% Vol de vie" },
                t2: { de: "7.5% Lifesteal", en: "7.5% Lifesteal", es: "7.5% Robo de vida", fr: "7.5% Vol de vie" },
                t3: { de: "10% Lifesteal", en: "10% Lifesteal", es: "10% Robo de vida", fr: "10% Vol de vie" }
            },
            {
                id: "distract", category: "Kampf", stack: 1, icon: "fa-mask",
                name: { de: "Ablenkend", en: "Distracting", es: "Distracci√≥n", fr: "Distrayant" },
                desc: { de: "Gegner, die getroffen werden, verursachen 20s lang weniger Schaden.", en: "Enemies hit deal less damage for 20s.", es: "Enemigos golpeados hacen menos da√±o por 20s.", fr: "Les ennemis touch√©s infligent moins de d√©g√¢ts pendant 20s." },
                t1: { de: "-5% Dmg", en: "-5% Dmg", es: "-5% Da√±o", fr: "-5% D√©g" },
                t2: { de: "-7.5% Dmg", en: "-7.5% Dmg", es: "-7.5% Da√±o", fr: "-7.5% D√©g" },
                t3: { de: "-10% Dmg", en: "-10% Dmg", es: "-10% Da√±o", fr: "-10% D√©g" }
            },
            {
                id: "excite", category: "Kampf", stack: 1, icon: "fa-stopwatch",
                name: { de: "Aufgeregt", en: "Excitable", es: "Excitable", fr: "Excitable" },
                desc: { de: "Treffer mit dem Basis-Angriff reduzieren die Abklingzeit anderer F√§higkeiten.", en: "Basic attack hits reduce cooldown of other abilities.", es: "Ataques b√°sicos reducen enfriamiento de habilidades.", fr: "Les attaques de base r√©duisent le temps de recharge des capacit√©s." },
                t1: { de: "-0.25s CD", en: "-0.25s CD", es: "-0.25s CD", fr: "-0.25s CD" },
                t2: { de: "-0.375s CD", en: "-0.375s CD", es: "-0.375s CD", fr: "-0.375s CD" },
                t3: { de: "-0.5s CD", en: "-0.5s CD", es: "-0.5s CD", fr: "-0.5s CD" }
            },
            // UTILITY / ATTRIBUTE
            {
                id: "ath", category: "Attribute", stack: 3, icon: "fa-person-running",
                name: { de: "Athletisch", en: "Athletic", es: "Atl√©tico", fr: "Athl√©tique" },
                desc: { de: "Erh√§lt HP- und Stamina-Regeneration basierend auf dem Sauerstoff-Wert.", en: "Gains HP/Stamina regen based on Oxygen stat.", es: "Regenera Salud/Estamina basado en Ox√≠geno.", fr: "Regagne Sant√©/Endurance selon l'Oxyg√®ne." },
                t1: { de: "0.05 Reg/Oxy", en: "0.05 Reg/Oxy", es: "0.05 Reg/Oxy", fr: "0.05 Reg/Oxy" },
                t2: { de: "0.075 Reg/Oxy", en: "0.075 Reg/Oxy", es: "0.075 Reg/Oxy", fr: "0.075 Reg/Oxy" },
                t3: { de: "0.1 Reg/Oxy", en: "0.1 Reg/Oxy", es: "0.1 Reg/Oxy", fr: "0.1 Reg/Oxy" }
            },
            {
                id: "aqua", category: "Utility", stack: 3, icon: "fa-water",
                name: { de: "Aquatisch", en: "Aquatic", es: "Acu√°tico", fr: "Aquatique" },
                desc: { de: "Schwimmt schneller und verbraucht weniger Sauerstoff/Ausdauer im Wasser.", en: "Swims faster, consumes less oxygen/stamina in water.", es: "Nada m√°s r√°pido, consume menos ox√≠geno/estamina.", fr: "Nage plus vite, consomme moins d'oxyg√®ne/endurance." },
                t1: { de: "+7.5% Speed", en: "+7.5% Speed", es: "+7.5% Vel", fr: "+7.5% Vit" },
                t2: { de: "+11.25% Speed", en: "+11.25% Speed", es: "+11.25% Vel", fr: "+11.25% Vit" },
                t3: { de: "+15% Speed", en: "+15% Speed", es: "+15% Vel", fr: "+15% Vit" }
            },
            {
                id: "bear", category: "Utility", stack: 3, icon: "fa-weight-hanging",
                name: { de: "Lastentr√§ger", en: "Carrier", es: "Portador", fr: "Porteur" },
                desc: { de: "Reduziert das Gewicht einer spezifischen Item-Kategorie im Inventar.", en: "Reduces weight of a specific item category.", es: "Reduce peso de una categor√≠a de √≠tem.", fr: "R√©duit le poids d'une cat√©gorie d'objets." },
                t1: { de: "-15% Gewicht", en: "-15% Weight", es: "-15% Peso", fr: "-15% Poids" },
                t2: { de: "-22.5% Gewicht", en: "-22.5% Weight", es: "-22.5% Peso", fr: "-22.5% Poids" },
                t3: { de: "-30% Gewicht", en: "-30% Weight", es: "-30% Peso", fr: "-30% Poids" }
            },
            {
                id: "care", category: "Utility", stack: 1, icon: "fa-feather",
                name: { de: "Sorglos", en: "Carefree", es: "Despreocupado", fr: "Insouciant" },
                desc: { de: "Erh√§lt einen Bewegungsgeschwindigkeits-Bonus (verloren bei Kampf/Reiter).", en: "Speed bonus (lost in combat/ridden).", es: "Bono velocidad (se pierde en combate/montado).", fr: "Bonus vitesse (perdu en combat/mont√©)." },
                t1: { de: "+7.5% Speed", en: "+7.5% Speed", es: "+7.5% Vel", fr: "+7.5% Vit" },
                t2: { de: "+11.25% Speed", en: "+11.25% Speed", es: "+11.25% Vel", fr: "+11.25% Vit" },
                t3: { de: "+15% Speed", en: "+15% Speed", es: "+15% Vel", fr: "+15% Vit" }
            },
            {
                id: "cold", category: "Utility", stack: 3, icon: "fa-sun",
                name: { de: "K√§lteresistent", en: "Cold", es: "Fr√≠o", fr: "Froid" },
                desc: { de: "Hitzeschutz und weniger Feuerschaden.", en: "Hyperthermic protection and less fire damage.", es: "Protecci√≥n calor y menos da√±o fuego.", fr: "Protection chaleur et moins d√©g√¢ts feu." },
                t1: { de: "40 Iso / -5% Fire", en: "40 Iso / -5% Fire", es: "40 Iso / -5% Fuego", fr: "40 Iso / -5% Feu" },
                t2: { de: "60 Iso / -7.5% Fire", en: "60 Iso / -7.5% Fire", es: "60 Iso / -7.5% Fuego", fr: "60 Iso / -7.5% Feu" },
                t3: { de: "80 Iso / -10% Fire", en: "80 Iso / -10% Fire", es: "80 Iso / -10% Fuego", fr: "80 Iso / -10% Feu" }
            },
            {
                id: "coward", category: "Utility", stack: 3, icon: "fa-person-falling-burst",
                name: { de: "Feige", en: "Cowardly", es: "Cobarde", fr: "L√¢che" },
                desc: { de: "Geschwindigkeits-Buff, wenn Schaden von Fremden genommen wird.", en: "Speed buff when damaged by non-allies.", es: "Velocidad al recibir da√±o de no-aliados.", fr: "Vitesse quand bless√© par non-alli√©s." },
                t1: { de: "+2.5% Speed", en: "+2.5% Speed", es: "+2.5% Vel", fr: "+2.5% Vit" },
                t2: { de: "+3.75% Speed", en: "+3.75% Speed", es: "+3.75% Vel", fr: "+3.75% Vit" },
                t3: { de: "+5.0% Speed", en: "+5.0% Speed", es: "+5.0% Vel", fr: "+5.0% Vit" }
            },
            {
                id: "fastlearn", category: "Utility", stack: 3, icon: "fa-graduation-cap",
                name: { de: "Schnelllerner", en: "Fast Learner", es: "Aprendiz R√°pido", fr: "Apprentissage Rapide" },
                desc: { de: "Erh√∂ht den Erfahrungsgewinn.", en: "Increases XP gain.", es: "Aumenta ganancia XP.", fr: "Augmente gain XP." },
                t1: { de: "+15% XP", en: "+15% XP", es: "+15% XP", fr: "+15% XP" },
                t2: { de: "+22.5% XP", en: "+22.5% XP", es: "+22.5% XP", fr: "+22.5% XP" },
                t3: { de: "+30% XP", en: "+30% XP", es: "+30% XP", fr: "+30% XP" }
            },
            {
                id: "fatty", category: "Attribute", stack: 3, icon: "fa-shield-heart",
                name: { de: "Fettpolster", en: "Fatty", es: "Grasoso", fr: "Gras" },
                desc: { de: "Erh√§lt R√ºstung basierend auf dem Nahrungswert.", en: "Gains armor based on Food stat.", es: "Gana armadura seg√∫n Comida.", fr: "Gagne armure selon Nourriture." },
                t1: { de: "0.1 Armor/Food", en: "0.1 Armor/Food", es: "0.1 Armadura/Comida", fr: "0.1 Armure/Nourr." },
                t2: { de: "0.15 Armor/Food", en: "0.15 Armor/Food", es: "0.15 Armadura/Comida", fr: "0.15 Armure/Nourr." },
                t3: { de: "0.2 Armor/Food", en: "0.2 Armor/Food", es: "0.2 Armadura/Comida", fr: "0.2 Armure/Nourr." }
            },
            {
                id: "warm", category: "Utility", stack: 3, icon: "fa-snowflake",
                name: { de: "W√§rme", en: "Warm", es: "C√°lido", fr: "Chaud" },
                desc: { de: "K√§lteschutz und weniger Eisschaden.", en: "Hypothermic protection and less ice damage.", es: "Protecci√≥n fr√≠o y menos da√±o hielo.", fr: "Protection froid et moins d√©g√¢ts glace." },
                t1: { de: "40 Iso / -5% Ice", en: "40 Iso / -5% Ice", es: "40 Iso / -5% Hielo", fr: "40 Iso / -5% Glace" },
                t2: { de: "60 Iso / -7.5% Ice", en: "60 Iso / -7.5% Ice", es: "60 Iso / -7.5% Hielo", fr: "60 Iso / -7.5% Glace" },
                t3: { de: "80 Iso / -10% Ice", en: "80 Iso / -10% Ice", es: "80 Iso / -10% Hielo", fr: "80 Iso / -10% Glace" }
            },
            // ZUCHT
            {
                id: "robust", category: "Zucht", stack: 3, icon: "fa-dna",
                name: { de: "Robust", en: "Robust", es: "Robusto", fr: "Robuste" },
                desc: { de: "Erh√∂ht die Chance, den H√ñHEREN Stat zu vererben.", en: "Higher chance to inherit HIGHER stat.", es: "Mayor probabilidad heredar stat ALTO.", fr: "Plus de chance d'h√©riter stat √âLEV√âE." },
                t1: { de: "+1.5% Chance", en: "+1.5% Chance", es: "+1.5% Prob.", fr: "+1.5% Chance" },
                t2: { de: "+2.25% Chance", en: "+2.25% Chance", es: "+2.25% Prob.", fr: "+2.25% Chance" },
                t3: { de: "+3.0% Chance", en: "+3.0% Chance", es: "+3.0% Prob.", fr: "+3.0% Chance" }
            },
            {
                id: "frail", category: "Zucht", stack: 3, icon: "fa-link-slash",
                name: { de: "Gebrechlich", en: "Frail", es: "Fr√°gil", fr: "Fr√™le" },
                desc: { de: "VERRINGERT die Chance, den H√ñHEREN Stat zu vererben.", en: "LOWER chance to inherit HIGHER stat.", es: "MENOR probabilidad heredar stat ALTO.", fr: "MOINS de chance d'h√©riter stat √âLEV√âE." },
                t1: { de: "-1.5% Chance", en: "-1.5% Chance", es: "-1.5% Prob.", fr: "-1.5% Chance" },
                t2: { de: "-2.25% Chance", en: "-2.25% Chance", es: "-2.25% Prob.", fr: "-2.25% Chance" },
                t3: { de: "-3.0% Chance", en: "-3.0% Chance", es: "-3.0% Prob.", fr: "-3.0% Chance" }
            },
            {
                id: "mutable", category: "Zucht", stack: 3, icon: "fa-bacterium",
                name: { de: "Ver√§nderlich", en: "Mutable", es: "Mutable", fr: "Mutable" },
                desc: { de: "Erh√∂ht die Wahrscheinlichkeit f√ºr eine Mutation.", en: "Increases mutation chance.", es: "Aumenta prob. mutaci√≥n.", fr: "Augmente chance mutation." },
                t1: { de: "+1.0% Chance", en: "+1.0% Chance", es: "+1.0% Prob.", fr: "+1.0% Chance" },
                t2: { de: "+1.5% Chance", en: "+1.5% Chance", es: "+1.5% Prob.", fr: "+1.5% Chance" },
                t3: { de: "+2.0% Chance", en: "+2.0% Chance", es: "+2.0% Prob.", fr: "+2.0% Chance" }
            }
        ];

        // ELEMENTE
        const grid = document.getElementById('contentGrid');
        const searchInput = document.getElementById('searchInput');
        const filterBtns = document.querySelectorAll('.filter-btn');

        // STATE
        let currentFilter = 'all';
        let currentSearch = '';
        let currentLang = 'de';

        // FUNCTIONS
        function setLang(lang) {
            currentLang = lang;
            
            // Buttons
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-'+lang).classList.add('active');

            // Static UI
            document.getElementById('mainTitle').innerText = UI_TEXT[lang].title;
            document.getElementById('searchInput').placeholder = UI_TEXT[lang].search;
            
            // Filters
            document.getElementById('filter-all').querySelector('span').innerText = UI_TEXT[lang].all;
            document.getElementById('filter-combat').querySelector('span').innerText = UI_TEXT[lang].combat;
            document.getElementById('filter-utility').querySelector('span').innerText = UI_TEXT[lang].utility;
            document.getElementById('filter-stats').querySelector('span').innerText = UI_TEXT[lang].stats;
            document.getElementById('filter-breed').querySelector('span').innerText = UI_TEXT[lang].breed;

            renderTraits();
        }

        function renderTraits() {
            grid.innerHTML = '';
            
            // 1. Filtern (Suche √ºber alle Sprachen!)
            let filteredData = traitData.filter(trait => {
                const matchesCat = currentFilter === 'all' || trait.category === currentFilter;
                
                // Smart Search: Check all languages
                const s = currentSearch.toLowerCase();
                const matchesSearch = 
                    trait.name.de.toLowerCase().includes(s) || 
                    trait.name.en.toLowerCase().includes(s) || 
                    trait.name.es.toLowerCase().includes(s) || 
                    trait.name.fr.toLowerCase().includes(s) ||
                    trait.desc[currentLang].toLowerCase().includes(s); // Only search desc in current lang to avoid confusing hits

                return matchesCat && matchesSearch;
            });

            // 2. Sortieren (Immer basierend auf aktueller Sprache)
            filteredData.sort((a, b) => {
                return a.name[currentLang].localeCompare(b.name[currentLang]);
            });

            if (filteredData.length === 0) {
                grid.innerHTML = `<div class="no-results">${UI_TEXT[currentLang].no_res}</div>`;
                return;
            }

            filteredData.forEach(trait => {
                const card = document.createElement('div');
                card.className = 'trait-card';
                card.setAttribute('data-cat', trait.category);
                
                // Determine secondary name (English usually, or German if EN is active)
                const secLang = currentLang === 'de' ? 'en' : (currentLang === 'en' ? 'de' : 'en');
                
                // Translate Category for Tag
                const catDisplay = CAT_TRANS[trait.category] ? CAT_TRANS[trait.category][currentLang] : trait.category;

                card.innerHTML = `
                    <div class="card-header-row">
                        <div class="trait-name-container">
                            <span class="trait-name-primary">${trait.name[currentLang]}</span>
                            <span class="trait-name-secondary">/ ${trait.name[secLang]}</span>
                        </div>
                        <i class="fa-solid ${trait.icon} trait-icon"></i>
                    </div>
                    
                    <div class="trait-desc">${trait.desc[currentLang]}</div>
                    
                    <div class="values-box">
                        <div class="value-row">
                            <span class="tier-label">1 Stack (T1):</span>
                            <span class="tier-val">${trait.t1[currentLang]}</span>
                        </div>
                        <div class="value-row">
                            <span class="tier-label">2 Stacks (T2):</span>
                            <span class="tier-val">${trait.t2[currentLang]}</span>
                        </div>
                        <div class="value-row">
                            <span class="tier-label">3 Stacks (T3):</span>
                            <span class="tier-val">${trait.t3[currentLang]}</span>
                        </div>
                    </div>

                    <div class="card-footer">
                        <div class="stack-info">${UI_TEXT[currentLang].stack} <span>${trait.stack}</span></div>
                        <span class="tag">${catDisplay}</span>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // EVENT LISTENERS
        searchInput.addEventListener('input', (e) => {
            currentSearch = e.target.value;
            renderTraits();
        });

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                renderTraits();
            });
        });

        // Initial Render
        window.onload = function() {
            setLang('de');
        };

    </script>
</body>
</html>
