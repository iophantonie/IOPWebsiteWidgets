<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOP Shiny Mod Wiki</title>
    <link href="https://fonts.googleapis.com/css2?family=Acme&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* IOP Style Variables */
        :root {
            --color-red: #E53935;
            --color-dark: rgba(20, 20, 20, 0.95);
            --color-light-dark: rgba(40, 40, 40, 0.9);
            --color-text: #f7f7f7;
            --color-gold: #FFEB3B;
            --color-info: #2196F3;
            --color-success: #4CAF50;
            
            /* Rainbow Gradient für Texte */
            --rainbow-gradient: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);
            
            --font-main: sans-serif;
            --font-header: 'Acme', sans-serif;
        }

        * { box-sizing: border-box; }

        /* Animationen */
        @keyframes shiny-pulse {
            0% { border-color: #ff0000; box-shadow: 0 0 10px rgba(255,0,0,0.4); color: #ff0000; }
            20% { border-color: #ffff00; box-shadow: 0 0 10px rgba(255,255,0,0.4); color: #ffff00; }
            40% { border-color: #00ff00; box-shadow: 0 0 10px rgba(0,255,0,0.4); color: #00ff00; }
            60% { border-color: #00ffff; box-shadow: 0 0 10px rgba(0,255,255,0.4); color: #00ffff; }
            80% { border-color: #ff00ff; box-shadow: 0 0 10px rgba(255,0,255,0.4); color: #ff00ff; }
            100% { border-color: #ff0000; box-shadow: 0 0 10px rgba(255,0,0,0.4); color: #ff0000; }
        }

        @keyframes rainbow-text-move {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        body {
            background-color: transparent;
            font-family: var(--font-main);
            color: var(--color-text);
            margin: 0;
            padding: 0; 
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            width: 100vw;
            overflow: hidden; 
        }

        /* Container */
        .shiny-container {
            background-color: var(--color-dark);
            border-radius: 8px; 
            border: 2px solid transparent;
            animation: shiny-pulse 8s linear infinite;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* Header */
        .header {
            background-image: url('https://i.postimg.cc/1RLwtdcp/shinyasabanner-1920x1080.jpg');
            background-size: cover;
            background-position: center;
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid transparent;
            animation: shiny-pulse 8s linear infinite;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            position: relative;
            box-shadow: none !important; 
            color: var(--color-text) !important;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* FLAGGEN SWITCHER */
        .lang-switch {
            position: absolute;
            top: 0;
            right: 0;
            display: flex;
            gap: 5px;
            z-index: 10;
        }
        .lang-btn {
            width: 30px; height: 20px;
            cursor: pointer;
            border-radius: 3px;
            border: 1px solid #fff;
            opacity: 0.5;
            transition: transform 0.2s, opacity 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            padding: 0;
            display: block;
        }
        .lang-btn:hover, .lang-btn.active {
            opacity: 1; transform: scale(1.15);
            border-color: #fff;
            z-index: 10;
        }

        .title {
            font-family: var(--font-header);
            font-size: 2.2rem; 
            text-transform: uppercase;
            margin: 0;
            letter-spacing: 2px;
            background: var(--rainbow-gradient);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow-text-move 4s linear infinite;
            text-shadow: none; 
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.3));
        }

        .subtitle {
            color: #ddd;
            font-size: 1rem;
            font-style: italic;
            margin-bottom: 10px;
        }

        /* SEARCH BAR */
        .search-container {
            width: 100%;
            max-width: 500px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border-radius: 20px;
            border: 2px solid #aaa;
            background-color: rgba(0, 0, 0, 0.5);
            color: #fff;
            font-family: var(--font-main);
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
            outline: none;
        }

        .search-input:focus {
            animation: shiny-pulse 4s linear infinite;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #ddd;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background-color: rgba(255,255,255,0.05);
            padding: 0 10px;
            overflow-x: auto;
            flex-shrink: 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .nav-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-family: var(--font-header);
            text-transform: uppercase;
            color: #aaa;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
            flex-grow: 1; 
            text-align: center;
        }

        .nav-tab:hover { color: #fff; background-color: rgba(255,255,255,0.05); }
        .nav-tab.active {
            background-color: rgba(255,255,255,0.05);
            border-bottom-width: 3px;
            border-bottom-style: solid;
            animation: shiny-pulse 4s linear infinite;
            background: var(--rainbow-gradient);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            box-shadow: none !important; 
        }

        /* Content Area */
        .content-area {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            scrollbar-width: thin;
            scrollbar-color: #9C27B0 transparent;
        }
        .content-area::-webkit-scrollbar { width: 8px; }
        .content-area::-webkit-scrollbar-thumb { background-color: #9C27B0; border-radius: 4px; }

        /* Sections */
        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* General Box Styling */
        .info-box {
            background-color: var(--color-light-dark);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .info-box h3 { 
            margin-top: 0; 
            font-family: var(--font-header); 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            padding-bottom: 10px; 
            background: var(--rainbow-gradient);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow-text-move 6s linear infinite;
        }
        .info-box ul, .info-box ol { padding-left: 20px; color: #ccc; }
        .info-box li { margin-bottom: 8px; line-height: 1.5; }
        .info-box p { color: #ccc; line-height: 1.5; }

        /* Sheet Link Button */
        .sheet-link-btn {
            display: inline-block;
            background: #2a6f3f;
            color: #fff;
            padding: 12px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            font-family: var(--font-header);
            margin-top: 15px;
            transition: all 0.2s;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .sheet-link-btn:hover { background: #338a4e; transform: translateY(-2px); }

        /* Shiny Grid */
        .shiny-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .shiny-card {
            background-color: var(--color-light-dark);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 10px rgba(0,0,0,0.4);
        }

        .shiny-card:hover {
            transform: translateY(-5px);
            animation: shiny-pulse 2s linear infinite;
        }

        .card-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-bottom: 2px solid rgba(255,255,255,0.1);
            background-color: #111;
        }
        .shiny-card:hover .card-img {
            border-bottom-color: transparent;
        }

        .card-content {
            padding: 15px;
            flex-grow: 1;
        }

        .card-title {
            font-family: var(--font-header);
            font-size: 1.5rem;
            color: #fff;
            margin: 0 0 5px 0;
            transition: color 0.3s;
        }
        
        .shiny-card:hover .card-title {
            background: var(--rainbow-gradient);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow-text-move 2s linear infinite;
        }

        .card-short-desc {
            font-size: 0.9rem;
            color: #aaa;
            line-height: 1.4;
        }

        /* Tiny Grid */
        .tiny-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .tiny-card {
            background-color: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            transition: transform 0.2s;
        }
        .tiny-card:hover {
            transform: scale(1.05);
            animation: shiny-pulse 2s linear infinite;
        }
        
        .tiny-card h4 { color: var(--color-gold); margin: 0 0 5px 0; font-family: var(--font-header); font-size: 1.1rem; }
        .tiny-card p { font-size: 0.85rem; color: #ccc; margin: 0; line-height: 1.3; }

        /* Highlight Search Result */
        .hidden { display: none !important; }

        /* === NEW: SHINY BUILDER STYLES === */
        .builder-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 800px) { .builder-container { grid-template-columns: 1fr; } }

        .builder-section {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .builder-select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background: #222;
            color: #fff;
            border: 1px solid #555;
            border-radius: 6px;
        }

        /* NEW: CLICKABLE EFFECT BUTTONS */
        .effect-category-title {
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 15px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 4px;
        }
        
        .effect-buttons-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .effect-btn {
            background: #333;
            border: 1px solid #555;
            color: #ddd;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .effect-btn:hover {
            background: #444;
            border-color: #777;
            transform: translateY(-2px);
        }

        .effect-btn.active {
            background: rgba(76, 175, 80, 0.2);
            border-color: #4CAF50;
            color: #fff;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.4);
        }

        .effect-btn i {
            font-size: 0.7rem;
        }

        .result-stat {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 0.9rem;
        }
        .result-stat span:last-child { color: var(--color-success); font-weight: bold; }

        /* === NEW: COLOR SET GRID === */
        .color-set-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .color-set-card:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-3px);
        }
        .color-set-title {
            font-family: var(--font-header);
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 10px;
        }
        .color-circles {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        .color-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid #555;
        }

        /* === MODAL STYLING === */
        .modal {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            backdrop-filter: blur(8px);
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active { display: flex; opacity: 1; }

        .modal-content {
            background-color: var(--color-light-dark);
            border: 3px solid transparent;
            border-radius: 12px;
            width: 95%;
            max-width: 1200px;
            max-height: 90%;
            display: flex;
            flex-direction: row;
            overflow: hidden;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s;
            animation: shiny-pulse 6s linear infinite;
        }

        .modal.active .modal-content { transform: scale(1); }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            color: #fff;
            font-size: 2.5rem;
            cursor: pointer;
            z-index: 10;
            text-shadow: 0 0 10px #000;
            transition: color 0.2s;
            line-height: 0.7;
        }
        .close-btn:hover { color: var(--color-red); }

        .modal-left {
            flex: 1.5;
            background-color: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 2px solid transparent;
            border-right-color: rgba(255,255,255,0.1); 
            overflow: hidden;
        }

        .modal-left img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            max-height: 85vh;
        }

        .modal-right {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: linear-gradient(135deg, rgba(30,30,30,1) 0%, rgba(20,20,20,1) 100%);
        }

        .modal-title {
            font-family: var(--font-header);
            font-size: 2.5rem;
            margin: 0 0 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px;
            background: var(--rainbow-gradient);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow-text-move 6s linear infinite;
        }

        .modal-section-title {
            font-weight: bold;
            color: var(--color-gold);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .modal-text {
            color: #ddd;
            line-height: 1.6;
            font-size: 0.95rem;
            white-space: pre-line; 
        }

        /* Image Zoom Styling */
        .zoomable-img {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .zoomable-img:hover {
            transform: scale(1.02);
        }

        @media (max-width: 900px) {
            .modal-content { flex-direction: column; }
            .modal-left { flex: none; height: 35vh; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1); }
            .modal-right { flex: 1; }
        }
        
        @media (max-width: 600px) {
            .title { font-size: 1.5rem; }
            .shiny-grid { grid-template-columns: 1fr; }
            .lang-switch { position: static; margin-bottom: 5px; }
            .header-content { align-items: center; }
        }
    </style>
</head>
<body>

    <div class="shiny-container">
        
        <div class="header">
            <div class="header-content">
                <!-- 4 Flaggen -->
                <div class="lang-switch">
                    <svg class="lang-btn active" id="btn-de" onclick="setLang('de')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5 3">
                        <rect width="5" height="3" fill="#000"/><rect width="5" height="2" y="1" fill="#D00"/><rect width="5" height="1" y="2" fill="#FFCE00"/>
                    </svg>
                    <svg class="lang-btn" id="btn-en" onclick="setLang('en')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30">
                        <clipPath id="s"><path d="M0,0 v30 h60 v-30 z"/></clipPath>
                        <clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath>
                        <g clip-path="url(#s)">
                            <path d="M0,0 v30 h60 v-30 z" fill="#012169"/>
                            <path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/>
                            <path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#C8102E" stroke-width="4"/>
                            <path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/>
                            <path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/>
                        </g>
                    </svg>
                    <svg class="lang-btn" id="btn-es" onclick="setLang('es')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 500">
                        <rect width="750" height="500" fill="#AA151B"/>
                        <rect width="750" height="250" y="125" fill="#F1BF00"/>
                    </svg>
                    <svg class="lang-btn" id="btn-fr" onclick="setLang('fr')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
                        <rect width="900" height="600" fill="#ED2939"/>
                        <rect width="600" height="600" fill="#fff"/>
                        <rect width="300" height="600" fill="#002395"/>
                    </svg>
                </div>

                <h1 class="title">Shiny's</h1>
                <div class="subtitle" id="uiSubtitle">Varianten, Fähigkeiten & Fundorte</div>
                
                <div class="search-container">
                    <i class="fa-solid fa-search search-icon"></i>
                    <input type="text" id="searchInput" class="search-input" placeholder="Suche...">
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showSection('faq')" id="navFaq"><i class="fa-solid fa-circle-question"></i> Info & FAQ</div>
            <div class="nav-tab" onclick="showSection('variants')" id="navVariants"><i class="fa-solid fa-dna"></i> Shiny Arten</div>
            <div class="nav-tab" onclick="showSection('tinies')" id="navTinies"><i class="fa-solid fa-paw"></i> Tinies & Stats</div>
            <div class="nav-tab" onclick="showSection('colors')" id="navColors"><i class="fa-solid fa-palette"></i> Farb Sets</div>
            <div class="nav-tab" onclick="showSection('checker')" id="navChecker"><i class="fa-solid fa-flask"></i> Shiny Checker</div>
            <div class="nav-tab" onclick="showSection('combos')" id="navCombos"><i class="fa-solid fa-layer-group"></i> Essenz Checker</div>
        </div>

        <div class="content-area">

            <!-- 1. INFO & FAQ -->
            <div id="faq" class="section active">
                <!-- Content injected via JS -->
            </div>

            <!-- 2. SHINY ARTEN (VARIANTS) -->
            <div id="variants" class="section">
                <!-- Content injected via JS -->
                 <div class="shiny-grid" id="variantsGrid"></div>
            </div>

            <!-- NEW: COLOR SETS SECTION -->
            <div id="colors" class="section">
                <div class="info-box">
                    <h3><i class="fa-solid fa-palette"></i> Farb-Sets Bibliothek</h3>
                    <p>Eine Übersicht aller bekannten Shiny-Farbkombinationen.</p>
                    <a href="https://docs.google.com/spreadsheets/d/1imxJ6Y6LxaqLiEpKrK2p2fvrVl06SEN7PhPhY8kpQNg/edit?gid=0#gid=0" target="_blank" class="sheet-link-btn" style="margin-bottom:20px;">
                        <i class="fa-solid fa-table"></i> Zur Farb-Tabelle (Google Sheets)
                    </a>
                    
                    <div id="colorSetGrid" class="shiny-grid">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- NEW: SHINY CHECKER SECTION (Renamed from Builder) -->
            <div id="checker" class="section">
                <div class="info-box">
                    <h3><i class="fa-solid fa-flask"></i> Shiny Checker</h3>
                    <p>Wähle Eigenschaften durch Anklicken aus, um die Boni zu sehen (Maximal 5).</p>
                    
                    <div class="builder-container">
                        <!-- Controls -->
                        <div class="builder-section">
                            <h4 style="color:var(--color-gold); margin-top:0;" id="lblStep1">1. Eigenschaften wählen</h4>
                            <div id="effectPicker">
                                <!-- JS Generated Buttons -->
                            </div>

                            <h4 style="color:var(--color-gold); margin-top:20px;" id="lblStep2">2. Farb-Set auswählen</h4>
                            <select id="colorSetSelect" class="builder-select" onchange="updateBuilder()">
                                <option value="" id="optNone">-- Kein Set --</option>
                                <!-- Populated by JS -->
                            </select>
                        </div>

                        <!-- Results -->
                        <div class="builder-section">
                            <h4 style="color:#2196F3; margin-top:0; border-bottom:1px solid #444; padding-bottom:10px;" id="lblRes">Ergebnis</h4>
                            <div id="builderResults">
                                <p style="color:#666; font-style:italic;">Klicke auf Effekte links, um Boni zu sehen...</p>
                            </div>
                            
                            <div id="builderColorPreview" style="margin-top:20px; display:none;">
                                <h4 style="color:#ff00ff; margin-bottom:10px;" id="lblPreview">Farb-Vorschau</h4>
                                <div id="builderColorCircles" class="color-circles"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 3. ESSENZ CHECKER (OLD COMBINATIONS) -->
            <div id="combos" class="section">
                <div class="info-box">
                    <h3 id="comboTitle"><i class="fa-solid fa-calculator"></i> Essenz Checker</h3>
                    <p id="comboDesc">
                        Wähle zwei Essenzen aus, um zu prüfen, ob sie miteinander kombinierbar sind.
                    </p>
                    
                    <a href="https://docs.google.com/spreadsheets/d/1AnCezRIAvI-tTyAQTtkTfYqnIjD5XMnk4tCDQnuAsgw/edit?pli=1#gid=0" target="_blank" class="sheet-link-btn">
                        <i class="fa-solid fa-table"></i> Zur Original Tabelle (Google Sheets)
                    </a>

                    <!-- INTERACTIVE CALCULATOR -->
                    <div class="combo-calculator" style="background-color: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; border: 1px solid var(--color-gold); margin-top: 20px; text-align: center;">
                        
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; align-items: center; margin-bottom: 20px;">
                            <select id="combo1" onchange="checkCombo()" style="padding: 10px; border-radius: 6px; background: #222; color: #fff; border: 1px solid #555; flex: 1; min-width: 200px;">
                                <option value="" id="optDef1">-- Wähle Essenz 1 --</option>
                                <!-- Optgroups injected via JS -->
                            </select>

                            <i class="fa-solid fa-plus" style="color: #aaa;"></i>

                            <select id="combo2" onchange="checkCombo()" style="padding: 10px; border-radius: 6px; background: #222; color: #fff; border: 1px solid #555; flex: 1; min-width: 200px;">
                                <option value="" id="optDef2">-- Wähle Essenz 2 --</option>
                            </select>
                        </div>

                        <div id="comboResult" style="padding: 15px; border-radius: 6px; background-color: rgba(0,0,0,0.5); min-height: 80px; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                            <span style="color: #aaa; font-style: italic;">Wähle zwei Essenzen aus...</span>
                        </div>

                         <div style="margin-top: 20px; overflow-x: auto;">
                            <!-- Static Matrix Table kept for reference/visual -->
                            <h4 style="color: var(--color-gold); margin-top: 0; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Kombinations-Matrix</h4>
                            <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem; text-align: center;">
                                <thead>
                                    <tr>
                                        <th style="padding: 10px; border-bottom: 2px solid #555; text-align: left;">Kombiniere...</th>
                                        <th style="padding: 10px; border-bottom: 2px solid #555; color: #2196F3;">Abilities</th>
                                        <th style="padding: 10px; border-bottom: 2px solid #555; color: #9C27B0;">Visuals</th>
                                        <th style="padding: 10px; border-bottom: 2px solid #555; color: #FF5722;">Size</th>
                                        <th style="padding: 10px; border-bottom: 2px solid #555; color: #4CAF50;">Tiny</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="background-color: rgba(33, 150, 243, 0.1);">
                                        <td style="padding: 10px; border-bottom: 1px solid #444; font-weight: bold; color: #2196F3; text-align: left;">Abilities</td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                    </tr>
                                    <tr style="background-color: rgba(156, 39, 176, 0.1);">
                                        <td style="padding: 10px; border-bottom: 1px solid #444; font-weight: bold; color: #9C27B0; text-align: left;">Visuals</td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i><sup style="color:#FFEB3B">*1</sup></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i><sup style="color:#FFEB3B">*2</sup></td>
                                    </tr>
                                    <tr style="background-color: rgba(255, 87, 34, 0.1);">
                                        <td style="padding: 10px; border-bottom: 1px solid #444; font-weight: bold; color: #FF5722; text-align: left;">Size</td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i><sup style="color:#FFEB3B">*1</sup></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                    </tr>
                                    <tr style="background-color: rgba(76, 175, 80, 0.1);">
                                        <td style="padding: 10px; border-bottom: 1px solid #444; font-weight: bold; color: #4CAF50; text-align: left;">Tiny</td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-check" style="color: #4CAF50;"></i><sup style="color:#FFEB3B">*2</sup></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                        <td style="padding: 10px; border-bottom: 1px solid #444;"><i class="fa-solid fa-xmark" style="color: #E53935;"></i></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div style="font-size: 0.8rem; color: #aaa; margin-top: 10px; text-align: left;">
                                <p style="margin: 2px 0;"><sup style="color:#FFEB3B">*1</sup> <strong>Skeletal</strong> + Size Change ist ein Sonderfall (eingeschränkt kompatibel).</p>
                                <p style="margin: 2px 0;"><sup style="color:#FFEB3B">*2</sup> <strong>Tiny</strong> funktioniert mit Visuals, aber <strong>Skeletal</strong> ist auch hier ein Sonderfall.</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- 4. TINIES & STATS -->
            <div id="tinies" class="section">
                <div class="info-box">
                    <h3><i class="fa-solid fa-paw"></i> Tinies (Nur Shoulder Pets)</h3>
                    <p>Spezielle Varianten, die nur für Schulter-Tiere verfügbar sind und dem Träger Boni verleihen.</p>
                    <div class="tiny-grid" id="tinyGrid" style="margin-top: 15px;">
                        <!-- JS Injected -->
                    </div>
                </div>
                <div class="info-box">
                    <h3><i class="fa-solid fa-chart-bar"></i> Stat-Booster Varianten</h3>
                    <p>Diese Dinos haben eine höhere Chance auf außergewöhnlich hohe Wild-Werte in einem bestimmten Attribut.</p>
                    <div class="tiny-grid" id="statGrid" style="margin-top: 15px;">
                        <!-- JS Injected -->
                    </div>
                </div>
            </div>

        </div>

        <!-- MODAL -->
        <div id="shinyModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal()">&times;</span>
                <div class="modal-left">
                    <img id="modalImg" src="" alt="">
                </div>
                <div class="modal-right">
                    <h2 class="modal-title" id="modalTitle">Titel</h2>
                    <div class="modal-section-title" id="loreSectionTitle"><i class="fa-solid fa-scroll"></i> Geschichte</div>
                    <p class="modal-text" id="modalLore">Lore Text...</p>
                    <div class="modal-section-title" id="abilitiesSectionTitle"><i class="fa-solid fa-bolt"></i> Fähigkeiten</div>
                    <p class="modal-text" id="modalAbilities">Abilities...</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        // =========================================================================
        // 1. DATENBANK & ÜBERSETZUNGEN
        // =========================================================================
        const translations = {
            subtitle: { de: "Varianten, Fähigkeiten & Fundorte", en: "Variants, Abilities & Locations", es: "Variantes, Habilidades y Ubicaciones", fr: "Variantes, Capacités et Lieux" },
            search: { de: "Shiny Art oder Color Set suchen...", en: "Search Shiny Type or Color Set...", es: "Buscar Shiny o Color...", fr: "Chercher Type Shiny ou Couleur..." },
            nav: {
                faq: { de: "Info & FAQ", en: "Info & FAQ", es: "Info y FAQ", fr: "Infos et FAQ" },
                variants: { de: "Shiny Arten", en: "Shiny Variants", es: "Variantes Shiny", fr: "Variantes Shiny" },
                tinies: { de: "Tinies & Stats", en: "Tinies & Stats", es: "Tinies y Stats", fr: "Tinies et Stats" },
                colors: { de: "Farb Sets", en: "Color Sets", es: "Sets de Color", fr: "Sets de Couleurs" },
                checker: { de: "Shiny Checker", en: "Shiny Checker", es: "Verificador Shiny", fr: "Vérificateur Shiny" },
                combos: { de: "Essenz Checker", en: "Essence Checker", es: "Verif. Esencias", fr: "Vérif. Essences" }
            },
            // Sections Content
            sections: {
                faq: {
                    what_title: { de: "Was sind Shinys?", en: "What are Shinys?", es: "¿Qué son los Shinys?", fr: "C'est quoi les Shinys ?" },
                    what_text: {
                        de: "Shinys sind spezielle Varianten von Dinos, die alle 2 Stunden auf jeder Map spawnen (Level 100-150). Sie haben besondere optische Effekte und einzigartige Fähigkeiten. Es können immer nur <strong>2 Shinys gleichzeitig</strong> auf einer Map sein.",
                        en: "Shinys are special dino variants spawning every 2 hours on each map (Lvl 100-150). They have unique visuals and abilities. Only <strong>2 Shinys</strong> can exist on a map at once.",
                        es: "Los Shinys son variantes especiales que aparecen cada 2 horas (Nvl 100-150). Tienen efectos y habilidades únicas. Máximo <strong>2 Shinys</strong> por mapa.",
                        fr: "Les Shinys sont des variantes spéciales apparaissant toutes les 2 heures (Niv 100-150). Ils ont des visuels et capacités uniques. Max <strong>2 Shinys</strong> par carte."
                    },
                    essence_title: { de: "Shiny Essenz & Items", en: "Shiny Essence & Items", es: "Esencia Shiny e Items", fr: "Essence Shiny et Objets" },
                    essence_text: {
                        de: "<strong>Rohe Essenz:</strong> Erhältlich durch das Töten von <em>Enraged Shinys</em>. Wird benötigt, um den <em>Shiny Prod</em> (Speer) zu craften.<br><br><strong>Essenz Extrahieren:</strong> Mit dem Shiny Prod können Fähigkeiten von <em>wilden</em> Shinys extrahiert werden. Diese Essenz kann dann auf eigene Dinos <strong>derselben Art</strong> angewendet werden (z.B. Raptor-Essenz auf Raptor).<br><em>Hinweis: Bis zu zwei Essenzen können gestapelt werden.</em>",
                        en: "<strong>Raw Essence:</strong> Dropped by <em>Enraged Shinys</em>. Used to craft the <em>Shiny Prod</em>.<br><br><strong>Extract Essence:</strong> Use the Shiny Prod to extract abilities from <em>wild</em> Shinys. Apply to own dinos of the <strong>same species</strong>.<br><em>Note: Up to two essences can be stacked.</em>",
                        es: "<strong>Esencia Bruta:</strong> De <em>Enraged Shinys</em>. Para crear <em>Shiny Prod</em>.<br><br><strong>Extraer:</strong> Usa el Prod en Shinys <em>salvajes</em>. Aplícalo a tus dinos de la <strong>misma especie</strong>.<br><em>Nota: Máximo dos esencias acumulables.</em>",
                        fr: "<strong>Essence Brute :</strong> Drop des <em>Enraged Shinys</em>. Pour crafter le <em>Shiny Prod</em>.<br><br><strong>Extraire :</strong> Utilisez le Prod sur Shinys <em>sauvages</em>. Appliquez sur vos dinos de <strong>même espèce</strong>.<br><em>Note : Max deux essences cumulables.</em>"
                    },
                    rules_title: { de: "Wichtige Regeln", en: "Important Rules", es: "Reglas Importantes", fr: "Règles Importantes" },
                    rules_list: {
                        de: ["<strong>Zucht:</strong> Shinys sind züchtbar, vererben aber <strong>keine</strong> Shiny-Fähigkeiten oder Effekte.", "<strong>Reisen:</strong> Shinys können wie normale Dinos zwischen Karten reisen.", "<strong>Gesperrt:</strong> 'Filthy' und 'Only Colored' Shinys sind deaktiviert."],
                        en: ["<strong>Breeding:</strong> Shinys can breed, but <strong>do not</strong> pass on abilities/effects.", "<strong>Travel:</strong> Shinys can travel between maps like normal dinos.", "<strong>Disabled:</strong> 'Filthy' and 'Only Colored' Shinys are disabled."],
                        es: ["<strong>Crianza:</strong> Se crían, pero <strong>no heredan</strong> habilidades.", "<strong>Viaje:</strong> Viajan entre mapas normalmente.", "<strong>Desactivado:</strong> 'Filthy' y 'Only Colored'."],
                        fr: ["<strong>Élevage :</strong> Reproductibles, mais <strong>n'héritent pas</strong> des capacités.", "<strong>Voyage :</strong> Voyagent entre cartes normalement.", "<strong>Désactivé :</strong> 'Filthy' et 'Only Colored'."]
                    }
                },
                builder: {
                    step1: { de: "1. Eigenschaften wählen", en: "1. Choose Traits", es: "1. Elegir Rasgos", fr: "1. Choisir Traits" },
                    step2: { de: "2. Farb-Set auswählen", en: "2. Select Color Set", es: "2. Elegir Set de Color", fr: "2. Choisir Set Couleur" },
                    result: { de: "Ergebnis", en: "Result", es: "Resultado", fr: "Résultat" },
                    preview: { de: "Farb-Vorschau", en: "Color Preview", es: "Vista Previa Color", fr: "Aperçu Couleur" },
                    empty: { de: "Klicke auf Effekte links, um Boni zu sehen...", en: "Click effects on the left to see bonuses...", es: "Clic en efectos para ver bonos...", fr: "Cliquez sur les effets pour voir les bonus..." },
                    none: { de: "-- Kein Set --", en: "-- No Set --", es: "-- Sin Set --", fr: "-- Aucun Set --" },
                    bonus: { de: "Bonus", en: "Bonus", es: "Bono", fr: "Bonus" }
                },
                combo: {
                    title: { de: "Essenz Checker", en: "Essence Checker", es: "Verificador de Esencia", fr: "Vérificateur d'Essence" },
                    desc: { de: "Wähle zwei Essenzen aus, um zu prüfen, ob sie kombinierbar sind.", en: "Choose two essences to check compatibility.", es: "Elige dos esencias para ver compatibilidad.", fr: "Choisissez deux essences pour vérifier la compatibilité." },
                    select1: { de: "-- Wähle Essenz 1 --", en: "-- Select Essence 1 --", es: "-- Elige Esencia 1 --", fr: "-- Choisir Essence 1 --" },
                    select2: { de: "-- Wähle Essenz 2 --", en: "-- Select Essence 2 --", es: "-- Elige Esencia 2 --", fr: "-- Choisir Essence 2 --" },
                    empty_res: { de: "Wähle zwei Essenzen aus...", en: "Select two essences...", es: "Elige dos esencias...", fr: "Choisissez deux essences..." },
                    ok: { de: "Diese Kombination ist möglich!", en: "This combination is possible!", es: "¡Combinación posible!", fr: "Combinaison possible !" },
                    err_same: { de: "Du kannst nicht zweimal dieselbe Essenz verwenden.", en: "Cannot use the same essence twice.", es: "No puedes usar la misma esencia dos veces.", fr: "Impossible d'utiliser la même essence deux fois." },
                    err_cat: { de: "Nicht möglich: Beide Essenzen stammen aus derselben Kategorie.", en: "Not possible: Both from same category.", es: "Imposible: Misma categoría.", fr: "Impossible : Même catégorie." },
                    err_tiny: { de: "Nicht möglich: Tiny/Stat Boosts sind nicht mit Fähigkeiten/Größe kombinierbar.", en: "Not possible: Tiny/Stat Boosts incompatible with Abilities/Size.", es: "Imposible: Tiny incompatible con Habilidad/Tamaño.", fr: "Impossible : Tiny incompatible avec Capacité/Taille." },
                    warn_skel: { de: "Eingeschränkt: Skeletal ändert das Mesh. Oft inkompatibel.", en: "Limited: Skeletal changes mesh. Often incompatible.", es: "Limitado: Skeletal cambia malla. A menudo incompatible.", fr: "Limité : Squelettique change le maillage. Souvent incompatible." }
                },
                modal: {
                    lore: { de: "Geschichte", en: "Lore", es: "Historia", fr: "Histoire" },
                    abilities: { de: "Fähigkeiten", en: "Abilities", es: "Habilidades", fr: "Capacités" }
                }
            }
        };

        // --- EFFECT DATA & VARIANTS (Fully Restored & Translated) ---
        const VARIANT_DATA = [
            { id: "Radioactive", title: "Radioactive", img: "https://i.postimg.cc/nzs9ZzK6/Bild-2024-09-14-132637655.png", desc: { de: "Gefährliche Aura, erhöht Mutationschance.", en: "Dangerous aura, increases mutation chance." }, lore: { de: "Dieser Dilo ist von einer miasmatischen Diffusion umgeben. Es ist radioaktiv – und zwar extrem.", en: "Surrounded by miasmatic diffusion. Extremely radioactive." }, abs: { de: "• Strahlungsimpuls verursacht Schaden im Umkreis.<br>• Erhöht die Mutationswahrscheinlichkeit von Babys um ca. 10% (nicht kumulativ).<br>• Immun gegen Strahlung.", en: "• Radiation pulse AoE damage.<br>• Increases baby mutation chance by ~10% (non-stackable).<br>• Immune to radiation." } },
            { id: "Shinobi", title: "Shinobi", img: "https://i.postimg.cc/k4S8FF7V/Bild-2024-05-23-012449351.png", desc: { de: "Meister der Tarnung, reduzierte Aggro.", en: "Master of stealth, reduced aggro." }, lore: { de: "Ein prächtiges Männchen, das in aller Ruhe durch den Ort läuft und völlig unbehelligt bleibt.", en: "Moves calmly and stays completely unnoticed." }, abs: { de: "• Deutlich reduzierte Aggro-Reichweite für wilde Dinos.<br>• Raubtiere müssen sehr nah kommen, um anzugreifen.", en: "• Significantly reduced aggro range.<br>• Predators must get very close to attack." } },
            { id: "Crystalline", title: "Crystalline", img: "https://i.postimg.cc/v86dNWBM/image.webp", desc: { de: "Glaskanone: Viel Schaden, wenig Defense.", en: "Glass Cannon: High dmg, low defense." }, lore: { de: "Wesen, die aus Kristallen und Edelsteinen bestehen. Wunderschön, aber zerbrechlich.", en: "Beings made of crystals and gems. Beautiful but fragile." }, abs: { de: "• 'Glaskanone': Verursacht mehr Schaden, erleidet aber auch mehr Schaden.<br>• Reflektiert Nahkampfschaden auf den Angreifer zurück.<br>• Kristalle können bei Treffern abbrechen.", en: "• Deals more damage, takes more damage.<br>• Reflects melee damage.<br>• Crystals can break off on hit." } },
            { id: "Nightmare", title: "Nightmare", img: "https://i.postimg.cc/prjfJrZt/Bild-2024-07-07-142809912.png", desc: { de: "Pechschwarz, verursacht Angst & Blindheit.", en: "Pitch black, causes fear & blindness." }, lore: { de: "Diese pechschwarzen Dinos kommen direkt aus einem Albtraum. Im Dunkeln fast unsichtbar.", en: "Pitch black dinos straight from a nightmare. Invisible in the dark." }, abs: { de: "• Saugt Wärme aus der Umgebung.<br>• Kackt gelegentlich Schwarze Perlen.<br>• Angriffe können einen 'Angstzustand' verursachen.", en: "• Drains heat from surroundings.<br>• Poops Black Pearls.<br>• Attacks can cause 'Fear'." } },
            { id: "Fathomless", title: "Fathomless", img: "https://i.postimg.cc/Pr7wcRNL/Bild-2024-05-23-012957933.png", desc: { de: "Blau gefärbt, enorme Tragekraft.", en: "Blue colored, enormous carry weight." }, lore: { de: "Tiere, die über eine ungeheure Kraft verfügen. Innen größer als außen.", en: "Creatures with immense strength. Bigger on the inside." }, abs: { de: "• Gewicht aller Gegenstände im Inventar ist um 80% reduziert.<br>• Einer der nützlichsten Farmer/Transporter.", en: "• Inventory weight reduced by 80%.<br>• One of the most useful farmers/transporters." } },
            { id: "Endurant", title: "Endurant", img: "https://i.postimg.cc/gkKhDH65/Bild-2024-05-23-013632425.png", desc: { de: "Unendliche Sprint-Ausdauer.", en: "Infinite sprint stamina." }, lore: { de: "Ein Tier, das unermüdlich den ganzen Tag und die ganze Nacht laufen kann.", en: "An animal that can run tirelessly day and night." }, abs: { de: "• Kann unbegrenzt sprinten, ohne Ausdauer zu verlieren.<br>• (Angriffe verbrauchen weiterhin Ausdauer).", en: "• Unlimited sprint without stamina loss.<br>• (Attacks still consume stamina)." } },
            { id: "Burning", title: "Burning", img: "https://i.postimg.cc/fL9sz5NR/Bild-2024-05-23-014009009.png", desc: { de: "Brennt permanent, Feuer-Explosion.", en: "Burns permanently, fire explosion." }, lore: { de: "Sein Körper war von Flammen umhüllt, die ihm jedoch keinen Schaden zufügten.", en: "Body engulfed in flames that deal no self-damage." }, abs: { de: "• Immun gegen Feuer- und Lavaschaden.<br>• Kann eine Feuerexplosion (AoE) auslösen (Strg / Spezialangriff).<br>• Visuell permanent am Brennen.", en: "• Immune to fire/lava.<br>• Can trigger Fire Explosion (AoE).<br>• Visually burning." } },
            { id: "Frozen", title: "Frozen", img: "https://i.postimg.cc/sDDTrxyM/Bild-2024-05-23-014324358.png", desc: { de: "Lebender Kühlschrank, Tanky.", en: "Living fridge, tanky." }, lore: { de: "Kreaturen, die vollständig aus Eis bestehen. Die Kälte hat ihnen nie etwas ausgemacht.", en: "Creatures made of ice. Cold never bothered them." }, abs: { de: "• Hält verderbliche Waren im Inventar frisch.<br>• Erleidet weniger Schaden (Tanky).<br>• Anfällig für Feuer.", en: "• Preserves perishables in inventory.<br>• Takes less damage (Tanky).<br>• Vulnerable to fire." } },
            { id: "Spectral", title: "Spectral", img: "https://i.postimg.cc/4dQjW0vq/Bild-2024-05-23-014717251.png", desc: { de: "Geist, kein Fallschaden, spezielle Drops.", en: "Ghost, no fall damage, special drops." }, lore: { de: "Durchsichtig und ätherisch wie Nebel. Man kann durch sie hindurchgreifen.", en: "Transparent and ethereal like mist." }, abs: { de: "• Kein Fallschaden.<br>• Bewegt sich völlig lautlos.<br>• Man kann durch sie hindurchgehen.<br>• Kackt 'spektralen Kot'.", en: "• No fall damage.<br>• Moves silently.<br>• Pass-through collision.<br>• Poops 'Spectral Poop'." } },
            { id: "Holographic", title: "Holographic", img: "https://i.postimg.cc/wTj3Q8cK/Bild-2024-05-23-015222386.png", desc: { de: "Tech-Scanner, findet High-Lvl Dinos.", en: "Tech scanner, finds high-lvl dinos." }, lore: { de: "Aus einer Simulation entkommen. Ein Fehler im Code, der lebendig wurde.", en: "Escaped from a simulation. A glitch come to life." }, abs: { de: "• Verleiht dem Reiter einen Tek-Helm-ähnlichen Scan.<br>• Hilft beim Erkennen von Bedrohungen und High-Level Dinos.", en: "• Grants Tek-Helm scan to rider.<br>• Helps spot threats and high-level dinos." } },
            { id: "Skeletal", title: "Skeletal", img: "https://i.postimg.cc/NFwCvkDT/Bild-2024-05-23-015442688.png", desc: { de: "Kein Futter nötig, Pfeil-Resistent.", en: "No food needed, arrow resistant." }, lore: { de: "Ein wandelndes Museumsstück, nur Knochen, kein Fleisch.", en: "A walking museum piece, bones only." }, abs: { de: "• Muss nicht fressen und atmet nicht.<br>• Kackt nicht (sauberes Haustier).<br>• Hohe Resistenz gegen Fernkampfwaffen.", en: "• No food/oxygen needed.<br>• Does not poop.<br>• High resistance to ranged weapons." } },
            { id: "Taser", title: "Taser", img: "https://i.postimg.cc/pTgrWp5K/Bild-2024-05-23-015731802.png", desc: { de: "Elektrische Verteidigung, betäubt Angreifer.", en: "Electric defense, stuns attackers." }, lore: { de: "Energie sprüht um seinen Körper. Ein natürlicher Verteidigungsmechanismus.", en: "Energy sparks around its body." }, abs: { de: "• Schockt und betäubt jeden Angreifer bei Kontakt.<br>• Kann Elektrizität auf nahe Ziele überspringen lassen.", en: "• Shocks/stuns attackers on contact.<br>• Electricity arcs to nearby targets." } },
            { id: "Psychotrop", title: "Psychotrop", img: "https://i.postimg.cc/zBbtHX0J/Bild-2024-05-23-020136937.png", desc: { de: "Regenbogen-Effekt, Biotoxin.", en: "Rainbow effect, Bio Toxin." }, lore: { de: "Ein hypnotisierender, belebter Regenbogen-Effekt von seltsamer Schönheit.", en: "Hypnotizing rainbow effect of strange beauty." }, abs: { de: "• Visueller 'Trip'-Effekt.<br>• Produziert Biotoxin im Inventar.", en: "• Visual 'Trip' effect.<br>• Produces Bio Toxin in inventory." } },
            { id: "Lunar", title: "Lunar", img: "https://i.postimg.cc/vT0tG18s/cc0aca80-188e-4a19-bd6d-d2c383f0450f.webp", desc: { de: "Geringe Schwerkraft, Mond-Sprünge.", en: "Low gravity, moon jumps." }, lore: { de: "Verfügt über eine Art natürlichen Auftrieb, als wäre es auf dem Mond.", en: "Possesses natural buoyancy, like on the moon." }, abs: { de: "• Trotzt der Schwerkraft: Hohe Sprünge, langsames Fallen.<br>• Kein visueller Skin (sieht normal aus).", en: "• Low gravity: High jumps, slow fall.<br>• No visual skin." } },
            { id: "Rubber", title: "Rubber", img: "https://i.postimg.cc/5NG8pW6n/20230228192909-1.webp", desc: { de: "Bunt wie ein Gummiball, springt, reflektiert.", en: "Colorful like a rubber ball, bounces, reflects." }, lore: { de: "Boing! Quietscht wie Gummi beim Laufen und hat ein wirbelndes Farbmuster.", en: "Boing! Squeaks like rubber and has swirling colors." }, abs: { de: "• Kein Fallschaden (prallt ab).<br>• Reflektiert Nahkampfangriffe.<br>• Macht Quietsch-Geräusche.", en: "• Bounces (no fall dmg).<br>• Reflects melee damage.<br>• Squeaky noises." } },
            { id: "Dazzling", title: "Dazzling", img: "https://i.postimg.cc/0ND4QNQ7/Bild-2024-05-23-020359325.png", desc: { de: "Blendet Angreifer, Immun gegen Strahlung.", en: "Blinds attackers, Radiation immune." }, lore: { de: "Gleicht einem polierten Edelstein. Kann einen Blitz erzeugen, der Angreifer blendet.", en: "Resembles a polished gem. Creates a blinding flash." }, abs: { de: "• Immun gegen Strahlung.<br>• Defensive Fähigkeit: Blendet Angreifer (Flashbang Effekt).", en: "• Immune to radiation.<br>• Defensive: Blinds attackers (Flashbang)." } },
            { id: "Enraged", title: "Enraged", img: "https://i.postimg.cc/PqXKbXrR/Screenshot-2024-02-09-235425.png", desc: { de: "Alpha-Status, nicht zähmbar, droppt Essenz.", en: "Alpha status, untameable, drops essence." }, lore: { de: "Die gefährlichste Form. Größer, stärker, schneller.", en: "The most dangerous form. Bigger, stronger, faster." }, abs: { de: "• <strong>Nicht zähmbar!</strong><br>• Droppt beim Tod besondere Beute und <strong>Shiny Essenz</strong>.<br>• Gibt Chibi-XP.", en: "• <strong>Untameable!</strong><br>• Drops special loot and <strong>Shiny Essence</strong> on death.<br>• Gives Chibi XP." } },
            { id: "PygmyColossal", title: "Pygmy & Colossal", img: "https://i.postimg.cc/3w0B1rDW/Bild-2024-05-23-020852847.png", desc: { de: "Größenveränderungen mit Stat-Anpassungen.", en: "Size changes with stat adjustments." }, lore: { de: "Inselzwergwuchs und Gigantismus im selben Ökosystem.", en: "Island dwarfism and gigantism." }, abs: { de: "• <strong>Colossal:</strong> Größer, mehr HP/Melee, aber langsamer.<br>• <strong>Pygmy:</strong> Kleiner, schneller, schwerer zu treffen.", en: "• <strong>Colossal:</strong> Bigger, more HP/Melee, slower.<br>• <strong>Pygmy:</strong> Smaller, faster, harder to hit." } }
        ];

        const TINY_DATA = [
            { title: "Bolstering", desc: { de: "Reduziert das Gewicht im Inventar.", en: "Reduces inventory weight." } },
            { title: "Hydrating", desc: { de: "Reduziert den Wasserverbrauch.", en: "Reduces water consumption." } },
            { title: "Invigorating", desc: { de: "Stellt Ausdauer wieder her.", en: "Restores stamina." } },
            { title: "Obscured", desc: { de: "Reduziert Aggro-Reichweite wilder Dinos.", en: "Reduces wild dino aggro range." } },
            { title: "Pyrethrous", desc: { de: "Hält Insekten fern.", en: "Repels insects." } },
            { title: "Revitalizing", desc: { de: "Regeneriert Gesundheit.", en: "Regenerates health." } },
            { title: "Serene", desc: { de: "Hilft beim Konzentrieren (Crafting).", en: "Helps focus (Crafting)." } }
        ];

        const STAT_DATA = [
            { title: "Hardy", desc: { de: "Gesundheit", en: "Health" }, color: "#4CAF50" },
            { title: "Stalwart", desc: { de: "Ausdauer", en: "Stamina" }, color: "#FFC107" },
            { title: "Inspired", desc: { de: "Sauerstoff", en: "Oxygen" }, color: "#03A9F4" },
            { title: "Satiate", desc: { de: "Nahrung", en: "Food" }, color: "#FF5722" },
            { title: "Hefty", desc: { de: "Gewicht", en: "Weight" }, color: "#9E9E9E" },
            { title: "Fierce", desc: { de: "Nahkampfschaden", en: "Melee Damage" }, color: "#F44336" }
        ];

        const EFFECT_DATA = {
            "Burning": { 
                desc: { de: "Feuer-Aura", en: "Fire Aura", es: "Aura de Fuego", fr: "Aura de Feu" }, 
                stats: { de: ["Feuerresistenz +50%", "Rückwurfschaden (Feuer)"], en: ["Fire Res +50%", "Reflect Dmg (Fire)"], es: ["Res. Fuego +50%", "Reflejo (Fuego)"], fr: ["Rés. Feu +50%", "Renvoi Dégâts (Feu)"] }, 
                group: "Visual/Effect" 
            },
            "Frozen": { 
                desc: { de: "Eis-Aura", en: "Ice Aura", es: "Aura de Hielo", fr: "Aura de Glace" }, 
                stats: { de: ["Eisresistenz +50%", "Verlangsamt Angreifer"], en: ["Ice Res +50%", "Slows Attackers"], es: ["Res. Hielo +50%", "Ralentiza"], fr: ["Rés. Glace +50%", "Ralentit"] }, 
                group: "Visual/Effect" 
            },
            "Electro": { 
                desc: { de: "Elektro-Schocks", en: "Electric Shocks", es: "Choques Eléctricos", fr: "Chocs Électriques" }, 
                stats: { de: ["Immun gegen Schock", "Betäubt Angreifer"], en: ["Shock Immune", "Stuns Attackers"], es: ["Inmune Shock", "Aturde"], fr: ["Immunisé Choc", "Étourdit"] }, 
                group: "Visual/Effect" 
            },
            "Toxic": { 
                desc: { de: "Gift-Aura", en: "Toxic Aura", es: "Aura Tóxica", fr: "Aura Toxique" }, 
                stats: { de: ["Giftresistenz", "Stapelbarer Giftschaden"], en: ["Poison Res", "Stacking Poison Dmg"], es: ["Res. Veneno", "Veneno Acumulable"], fr: ["Rés. Poison", "Poison Cumulable"] }, 
                group: "Visual/Effect" 
            },
            "Radioactive": { 
                desc: { de: "Strahlung", en: "Radiation", es: "Radiación", fr: "Radiation" }, 
                stats: { de: ["AoE Strahlungsschaden", "Licht im Dunkeln"], en: ["AoE Rad Dmg", "Glow in Dark"], es: ["Daño Rad AoE", "Brilla"], fr: ["Dégâts Rad AoE", "Brille"] }, 
                group: "Visual/Effect" 
            },
            "Spectral": { 
                desc: { de: "Geist", en: "Ghost", es: "Fantasma", fr: "Fantôme" }, 
                stats: { de: ["Kein Fallschaden", "Durchlässig für Projektile"], en: ["No Fall Dmg", "Projectile Passthrough"], es: ["Sin Daño Caída", "Pasar Proyectiles"], fr: ["Pas Dégâts Chute", "Traversée Projectiles"] }, 
                group: "Visual/Effect" 
            },
            "Holographic": { 
                desc: { de: "Tech", en: "Tech", es: "Tecnología", fr: "Tech" }, 
                stats: { de: ["Tek-Scan Umgebung", "Coole Optik"], en: ["Tek-Scan Area", "Cool Visuals"], es: ["Escaneo Tek", "Visuales"], fr: ["Scan Tek", "Visuels"] }, 
                group: "Visual/Effect" 
            },
            "Rubber": { 
                desc: { de: "Gummi", en: "Rubber", es: "Goma", fr: "Caoutchouc" }, 
                stats: { de: ["Springt hoch", "Reflektiert Schaden"], en: ["Bouncy", "Reflects Dmg"], es: ["Rebota", "Refleja Daño"], fr: ["Rebondit", "Reflète Dégâts"] }, 
                group: "Visual/Effect" 
            },
            "Dazzling": { 
                desc: { de: "Blendend", en: "Dazzling", es: "Deslumbrante", fr: "Éblouissant" }, 
                stats: { de: ["Blendet Angreifer", "Strahlungsresistenz"], en: ["Blinds Attackers", "Rad Res"], es: ["Ciega", "Res. Rad"], fr: ["Aveugle", "Rés. Rad"] }, 
                group: "Visual/Effect" 
            },
            "Nightmare": { 
                desc: { de: "Albtraum", en: "Nightmare", es: "Pesadilla", fr: "Cauchemar" }, 
                stats: { de: ["Verursacht Angst", "Unsichtbar im Dunkeln"], en: ["Causes Fear", "Invisible in Dark"], es: ["Causa Miedo", "Invisible"], fr: ["Cause Peur", "Invisible"] }, 
                group: "Visual/Effect" 
            },
            "Crystalline": { 
                desc: { de: "Kristall", en: "Crystal", es: "Cristal", fr: "Cristal" }, 
                stats: { de: ["Glaskanone (+Dmg rein/raus)", "Reflektiert"], en: ["Glass Cannon (+Dmg in/out)", "Reflects"], es: ["Cañón Cristal", "Refleja"], fr: ["Canon Verre", "Reflète"] }, 
                group: "Visual/Effect" 
            },
            "Skeletal": { 
                desc: { de: "Skelett", en: "Skeleton", es: "Esqueleto", fr: "Squelette" }, 
                stats: { de: ["Kein Futter nötig", "Hohe Fernkampf-Resistenz"], en: ["No Food Need", "High Ranged Res"], es: ["Sin Comida", "Alta Res. Rango"], fr: ["Pas Besoin Nourr.", "Haute Rés. Distance"] }, 
                group: "Visual/Effect" 
            },
            "Shinobi": { 
                desc: { de: "Stealth", en: "Stealth", es: "Sigilo", fr: "Furtivité" }, 
                stats: { de: ["Aggro Reichweite reduziert", "Schwer zu entdecken"], en: ["Reduced Aggro Range", "Hard to Detect"], es: ["Menos Aggro", "Difícil Detectar"], fr: ["Portée Aggro Réduite", "Difficile à Détecter"] }, 
                group: "Abilities" 
            },
            "Fathomless": { 
                desc: { de: "Wasser", en: "Water", es: "Agua", fr: "Eau" }, 
                stats: { de: ["Unendlicher Sauerstoff", "Schnelles Schwimmen"], en: ["Infinite Oxygen", "Fast Swim"], es: ["Oxígeno Infinito", "Nado Rápido"], fr: ["Oxygène Infini", "Nage Rapide"] }, 
                group: "Abilities" 
            },
            "Endurant": { 
                desc: { de: "Ausdauer", en: "Stamina", es: "Estamina", fr: "Endurance" }, 
                stats: { de: ["Unendlicher Sprint"], en: ["Infinite Sprint"], es: ["Sprint Infinito"], fr: ["Sprint Infini"] }, 
                group: "Abilities" 
            },
            "Lunar": { 
                desc: { de: "Mond", en: "Moon", es: "Luna", fr: "Lune" }, 
                stats: { de: ["Geringe Schwerkraft", "Hohe Sprünge"], en: ["Low Gravity", "High Jumps"], es: ["Gravedad Baja", "Saltos Altos"], fr: ["Faible Gravité", "Sauts Hauts"] }, 
                group: "Abilities" 
            },
            "Colossal": { 
                desc: { de: "Size Mod", en: "Size Mod", es: "Mod Tamaño", fr: "Mod Taille" }, 
                stats: { de: ["Größe +50%", "HP +++", "Speed ---"], en: ["Size +50%", "HP +++", "Speed ---"], es: ["Tamaño +50%", "HP +++", "Vel ---"], fr: ["Taille +50%", "PV +++", "Vit ---"] }, 
                group: "Size" 
            },
            "Pygmy": { 
                desc: { de: "Size Mod", en: "Size Mod", es: "Mod Tamaño", fr: "Mod Taille" }, 
                stats: { de: ["Größe -30%", "Speed ++", "HP -"], en: ["Size -30%", "Speed ++", "HP -"], es: ["Tamaño -30%", "Vel ++", "HP -"], fr: ["Taille -30%", "Vit ++", "PV -"] }, 
                group: "Size" 
            },
            // Tinies & Stat Boosts (Generic translation)
            "Bolstering": { desc: { de: "Tiny", en: "Tiny", es: "Tiny", fr: "Tiny" }, stats: { de: ["Gewicht Reduktion"], en: ["Weight Reduction"], es: ["Reducción Peso"], fr: ["Réduction Poids"] }, group: "Tinies (Shoulder)" },
            "Hydrating": { desc: { de: "Tiny", en: "Tiny", es: "Tiny", fr: "Tiny" }, stats: { de: ["Wasser Erhalt"], en: ["Water Retention"], es: ["Retención Agua"], fr: ["Rétention Eau"] }, group: "Tinies (Shoulder)" },
            "Hardy": { desc: { de: "Stat", en: "Stat", es: "Stat", fr: "Stat" }, stats: { de: ["Gesundheit +"], en: ["Health +"], es: ["Salud +"], fr: ["Santé +"] }, group: "Stat Boosts" }
        };

        const COLOR_SETS = [
            { name: "Abominable", ids: [214, 33, 23, 34, 96, 25] },
            { name: "Abro", ids: [25, 59, 36, 55, 67, 91] },
            { name: "Ace", ids: [79, 226, 36, 90, 50, 55] },
            { name: "Agender", ids: [79, 35, 59, 57, 55, 18] },
            { name: "Albino", ids: [36, 218, 55, 38, 8] },
            { name: "All Hallow's", ids: [4, 14, 34, 62, 75, 76] },
            { name: "Amazon", ids: [57, 58, 59, 66, 94] },
            { name: "Amethyst", ids: [18, 30, 67, 50, 90] },
            { name: "Azure", ids: [28, 215, 95, 53, 54] },
            { name: "Bi", ids: [210, 91, 68, 95, 54, 89] },
            { name: "Blaze", ids: [70, 75, 208, 56] },
            { name: "Bright Rainbow", ids: [1, 208, 4, 84, 95] },
            { name: "Budgie", ids: [209, 214, 226, 215, 53] },
            { name: "Buffer Overflow", ids: [76, 95, 73] },
            { name: "Candy", ids: [4, 11, 18, 36, 74, 75] },
            { name: "Caribbean", ids: [53, 58, 59, 94, 95] },
            { name: "Chalcedony", ids: [40, 33, 41, 34, 64] },
            { name: "Charnel", ids: [226, 63, 64, 97, 209, 47] },
            { name: "Cheep", ids: [11, 100, 25, 19, 68, 89] },
            { name: "Chocolate Egg", ids: [18, 4, 10, 74, 77, 71] },
            { name: "Coal", ids: [80, 29, 51] },
            { name: "Dreary Rainbow", ids: [70, 44, 24, 85, 94] },
            { name: "Ectoplasm", ids: [7, 11, 18, 23, 25, 83] },
            { name: "Eldritch", ids: [79, 56, 61, 86, 26, 84] },
            { name: "Ember", ids: [62, 20, 74] },
            { name: "Expectation Failed", ids: [54, 73, 90] },
            { name: "Fallout", ids: [18, 55, 25, 214, 23, 46] },
            { name: "Fathomless", ids: [224, 51, 53, 54, 81, 95] },
            { name: "Figgy Pudding", ids: [69, 68, 82, 210, 38, 32] },
            { name: "Fluid", ids: [91, 54, 213, 79, 18, 89] },
            { name: "Frozen", ids: [18, 28, 96, 95] },
            { name: "Fudge Brownie", ids: [15, 71, 34, 100] },
            { name: "Gateway Timeout", ids: [78, 99, 205] },
            { name: "Genderqueer", ids: [89, 90, 18, 55, 88, 86] },
            { name: "Ghoulish (Vampyre)", ids: [79, 73, 81, 226, 80, 17] },
            { name: "Gilded", ids: [36, 55, 8, 11, 216] },
            { name: "Ginger", ids: [32, 10, 208, 44, 217] },
            { name: "Goth", ids: [70, 69, 90, 89, 62] },
            { name: "Grinch", ids: [85, 26, 27, 60, 65, 57] },
            { name: "Gummy", ids: [11, 59, 90, 91, 95, 76] },
            { name: "Heartthrob/True", ids: [39, 73, 12, 79, 62, 17] },
            { name: "Hubba Hubba/Ardent", ids: [68, 30, 19, 90, 91, 82] },
            { name: "Humbug", ids: [79, 82, 89, 69, 99, 100] },
            { name: "Indigo", ids: [28, 30, 31, 49, 50] },
            { name: "Infinite Loop", ids: [84, 54, 73] },
            { name: "Jack O' Lantern", ids: [75, 76, 79, 82, 89, 90] },
            { name: "Jungle", ids: [84, 83, 85, 59, 88] },
            { name: "Kraken 1", ids: [14, 79, 80, 81, 29] },
            { name: "Kraken 2", ids: [52, 49, 31, 30, 50] },
            { name: "Kraken 3", ids: [53, 95, 96, 69, 207] },
            { name: "Krampus", ids: [92, 94, 59, 25, 226, 80] },
            { name: "Lichen", ids: [98, 23, 66, 78, 72] },
            { name: "Lovebird/Chivalrous", ids: [19, 74, 76, 78, 59, 58] },
            { name: "Luna", ids: [25, 24, 26, 66, 27] },
            { name: "Midnight", ids: [57, 80, 81, 52, 51] },
            { name: "Mint Chocolate Chip", ids: [84, 100, 15] },
            { name: "Mistletoe", ids: [87, 57, 88, 26, 28, 18] },
            { name: "Mossy", ids: [23, 46, 26, 45, 78] },
            { name: "Motley", ids: [31, 25, 208, 50, 59] },
            { name: "Neopolitan", ids: [19, 100, 33] },
            { name: "Noir", ids: [79, 60, 56, 14, 35] },
            { name: "Nonbinary", ids: [216, 36, 89, 90, 78, 79] },
            { name: "Paisley", ids: [213, 221, 216, 85, 81] },
            { name: "Pan", ids: [68, 69, 93, 94, 78, 225] },
            { name: "Paramour/Faithful", ids: [90, 61, 29, 82, 31, 49] },
            { name: "Pastel", ids: [19, 21, 209, 25, 28] },
            { name: "Peep", ids: [36, 209, 47, 30, 67, 96] },
            { name: "Piebald", ids: [36, 18, 55, 79, 56] },
            { name: "Platonic", ids: [10, 76, 99, 97, 44, 209] },
            { name: "Polar", ids: [18, 55, 8, 28, 215] },
            { name: "Poly", ids: [91, 68, 84, 66, 96, 95] },
            { name: "Poppy", ids: [19, 12, 73, 70, 71] },
            { name: "Princess", ids: [30, 67, 210, 220, 91] },
            { name: "Psycho Lapis", ids: [50, 18, 49, 30, 52] },
            { name: "Psycho Leaf", ids: [46, 61, 87, 26, 27] },
            { name: "Psycho Matcha", ids: [45, 46, 26, 23, 9] },
            { name: "Psycho Plum", ids: [91, 50, 89, 30, 69] },
            { name: "Pumpkin", ids: [16, 74, 75, 76, 88, 222] },
            { name: "Punk", ids: [100, 84, 19, 50, 13] },
            { name: "Puppylove/Winsome", ids: [38, 39, 21, 17, 19, 73] },
            { name: "Radium", ids: [79, 83, 97, 98, 99, 100] },
            { name: "Railgun Error", ids: [73, 43, 84] },
            { name: "Rainbow", ids: [73, 12, 10, 11, 26] },
            { name: "Raspberry Ripple", ids: [69, 68, 32, 20, 82] },
            { name: "Roasted Chestnut", ids: [22, 77, 15, 71, 41, 56] },
            { name: "Rockwell", ids: [30, 67, 213, 50, 90] },
            { name: "Rocky Road", ids: [32, 42, 34, 36] },
            { name: "Rose", ids: [12, 19, 38, 39, 21] },
            { name: "Roynish", ids: [89, 90, 71, 72, 93, 56] },
            { name: "Ruby", ids: [19, 12, 73, 70, 17] },
            { name: "Russet", ids: [21, 20, 77, 72, 70] },
            { name: "Saffron", ids: [209, 11, 10, 222, 76] },
            { name: "Sanna Claws", ids: [70, 71, 17, 25, 55, 20] },
            { name: "Santa Tooths", ids: [86, 87, 26, 216, 12, 18] },
            { name: "Segmentation Fault", ids: [84, 207, 44] },
            { name: "Sherwood", ids: [25, 26, 66, 85, 84] },
            { name: "Shinobi", ids: [13, 50, 49, 82] },
            { name: "Smoochie/Passionate", ids: [19, 68, 70, 69, 17, 71] },
            { name: "Spice", ids: [39, 43, 75, 72, 71] },
            { name: "Squamous", ids: [80, 57, 69, 29, 82, 62] },
            { name: "Stack Corruption", ids: [83, 84, 54] },
            { name: "Storm", ids: [24, 66, 65, 61, 35] },
            { name: "Sugarplum", ids: [90, 67, 55, 48, 31, 50] },
            { name: "Sunset", ids: [31, 72, 74, 76, 89] },
            { name: "Tatterdemalion", ids: [32, 10, 17, 22, 26] },
            { name: "Tiger", ids: [36, 38, 10, 221, 44] },
            { name: "Toxic", ids: [83, 84, 12, 44] },
            { name: "Trans", ids: [67, 30, 36, 18, 96, 28] },
            { name: "Unprocessable Entity", ids: [89, 54, 224] },
            { name: "Unrequited", ids: [28, 67, 94, 51, 92, 57] },
            { name: "Uranium Oxide", ids: [74, 208, 77, 44, 14, 79] },
            { name: "Verdant", ids: [25, 66, 85, 88, 84] },
            { name: "Xanthic", ids: [216, 11, 209, 32, 9] },
            { name: "Zero Day", ids: [73, 43, 75] }
        ];

        const ARK_COLORS = {
            1: "#ff0000", 2: "#0000ff", 3: "#00ff00", 4: "#ffff00", 5: "#00ffff", 6: "#ff00ff", 
            8: "#c8caca", 10: "#ffb46c", 11: "#fffa8a", 12: "#ff756c", 18: "#ffffff", 20: "#592b2b",
            23: "#cacaa0", 25: "#e0ffe0", 33: "#684423", 34: "#a0a0a0", 36: "#f8f8f8", 38: "#ffe0d0",
            44: "#683318", 51: "#3e4f63", 52: "#1f2a36", 55: "#b5d4f2", 56: "#343434", 57: "#141725",
            70: "#7a000d", 73: "#dc0600", 75: "#ff3700", 80: "#010208", 81: "#010509", 83: "#65ff0d",
            84: "#09cf3c", 96: "#6b2165", 208: "#ff8800", 214: "#e0e0e0", 218: "#e6e6e6"
        };
        const getColorHex = (id) => ARK_COLORS[id] || '#555';

        // --- STATE ---
        let currentLang = 'de';
        const selectedEffects = new Set();

        function setLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');

            // Static Text
            document.getElementById('searchInput').placeholder = translations.search[lang];
            
            // Nav
            document.getElementById('navFaq').innerHTML = `<i class="fa-solid fa-circle-info"></i> ${translations.nav.faq[lang]}`;
            document.getElementById('navVariants').innerHTML = `<i class="fa-solid fa-dna"></i> ${translations.nav.variants[lang]}`;
            document.getElementById('navTinies').innerHTML = `<i class="fa-solid fa-paw"></i> ${translations.nav.tinies[lang]}`;
            document.getElementById('navColors').innerHTML = `<i class="fa-solid fa-palette"></i> ${translations.nav.colors[lang]}`;
            document.getElementById('navChecker').innerHTML = `<i class="fa-solid fa-flask"></i> ${translations.nav.checker[lang]}`;
            document.getElementById('navCombos').innerHTML = `<i class="fa-solid fa-layer-group"></i> ${translations.nav.combos[lang]}`;

            // Re-render ALL
            renderFAQ();
            renderVariants(); // Updated
            renderTinies();   // Updated
            updateBuilder(); 
            checkCombo(); 
            renderColorSets(); 
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            const btn = document.querySelector(`.nav-tab[onclick*="${sectionId}"]`);
            if(btn) btn.classList.add('active');
        }

        // --- RENDER FUNCTIONS ---
        function renderFAQ() {
            const data = translations.sections.faq;
            document.getElementById('faq').innerHTML = `
                <div class="info-box">
                    <h3><i class="fa-solid fa-star"></i> ${data.what_title[currentLang]}</h3>
                    <p>${data.what_text[currentLang]}</p>
                </div>
                <div class="info-box">
                    <h3><i class="fa-solid fa-flask"></i> ${data.essence_title[currentLang]}</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: center;">
                        <div style="flex: 1; min-width: 250px;">
                            <p>${data.essence_text[currentLang]}</p>
                        </div>
                        <div style="text-align: center; flex-basis: 300px;">
                            <img src="https://i.postimg.cc/T3rXpxtM/Bild-2024-05-23-022659420.png" alt="Shiny Essenz" class="zoomable-img" style="width: 100%; max-width: 400px; border-radius: 8px; box-shadow: 0 0 15px rgba(156, 39, 176, 0.6);" onclick="openImageModal(this.src, '${data.essence_title[currentLang]}')">
                        </div>
                    </div>
                </div>
                <div class="info-box">
                    <h3><i class="fa-solid fa-circle-exclamation"></i> ${data.rules_title[currentLang]}</h3>
                    <ul>${data.rules_list[currentLang].map(r => `<li>${r}</li>`).join('')}</ul>
                </div>
            `;
        }

        function renderVariants() {
            const container = document.getElementById('variantsGrid');
            container.innerHTML = "";
            
            VARIANT_DATA.forEach(v => {
                const card = document.createElement('div');
                card.className = 'shiny-card';
                card.onclick = () => openModal(v);

                const desc = v.desc[currentLang] || v.desc.en;
                
                card.innerHTML = `
                    <img src="${v.img}" class="card-img" alt="${v.title}">
                    <div class="card-content">
                        <h3 class="card-title">${v.title}</h3>
                        <div class="card-short-desc">${desc}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderTinies() {
            const tinyContainer = document.getElementById('tinyGrid');
            const statContainer = document.getElementById('statGrid');
            tinyContainer.innerHTML = "";
            statContainer.innerHTML = "";

            TINY_DATA.forEach(t => {
                const div = document.createElement('div');
                div.className = 'tiny-card';
                div.innerHTML = `<h4>${t.title}</h4><p>${t.desc[currentLang] || t.desc.en}</p>`;
                tinyContainer.appendChild(div);
            });

            STAT_DATA.forEach(s => {
                const div = document.createElement('div');
                div.className = 'tiny-card';
                div.innerHTML = `<h4 style="color: ${s.color};">${s.title}</h4><p>${s.desc[currentLang] || s.desc.en}</p>`;
                statContainer.appendChild(div);
            });
        }

        function renderColorSets() {
            const container = document.getElementById('colorSetGrid');
            container.innerHTML = "";
            const term = document.getElementById('searchInput').value.toLowerCase();

            COLOR_SETS.forEach(set => {
                if(term && !set.name.toLowerCase().includes(term)) return;
                
                const card = document.createElement('div');
                card.className = 'color-set-card';
                card.onclick = () => {
                    showSection('checker');
                    document.getElementById('colorSetSelect').value = set.name;
                    updateBuilder();
                };

                const circles = set.ids.map(id => 
                    `<div class="color-circle" style="background-color:${getColorHex(id)}" title="ID: ${id}"></div>`
                ).join('');

                card.innerHTML = `
                    <div class="color-set-title">${set.name}</div>
                    <div class="color-circles">${circles}</div>
                    <div style="font-size:0.8rem; color:#666; margin-top:8px;">IDs: ${set.ids.join(', ')}</div>
                `;
                container.appendChild(card);
            });
        }

        // --- CHECKER BUILDER ---
        function initBuilder() {
            const picker = document.getElementById('effectPicker');
            if(!picker) return;
            picker.innerHTML = '';
            
            const groups = {};
            for (const [key, val] of Object.entries(EFFECT_DATA)) {
                const g = val.group;
                if (!groups[g]) groups[g] = [];
                groups[g].push(key);
            }

            for (const [groupName, effects] of Object.entries(groups)) {
                const title = document.createElement('div');
                title.className = 'effect-category-title';
                title.innerText = groupName;
                picker.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'effect-buttons-grid';
                effects.sort().forEach(eff => {
                    const btn = document.createElement('div');
                    btn.className = 'effect-btn';
                    btn.setAttribute('data-effect', eff);
                    btn.innerHTML = `<i class="fa-solid fa-plus"></i> ${eff}`;
                    btn.onclick = () => toggleEffect(eff, btn);
                    grid.appendChild(btn);
                });
                picker.appendChild(grid);
            }

            const select = document.getElementById('colorSetSelect');
            if(select) {
                COLOR_SETS.forEach(set => {
                    const opt = document.createElement('option');
                    opt.value = set.name;
                    opt.text = set.name;
                    select.appendChild(opt);
                });
            }
            
            // Populate Combo Dropdowns
            const comboGroups = {
                "Abilities": ["Shinobi", "Fathomless", "Endurant", "Lunar"],
                "Visuals": ["Burning", "Frozen", "Taser", "Psychotropic", "Radioactive", "Spectral", "Holographic", "Rubber", "Dazzling", "Nightmare", "Crystalline", "Skeletal"],
                "Size": ["Colossal", "Pygmy"],
                "Tinies": ["Bolstering", "Hydrating", "Invigorating", "Obscured", "Pyrethrous", "Revitalizing", "Serene"],
                "Stats": ["Hardy", "Stalwart", "Inspired", "Satiate", "Hefty", "Fierce"]
            };

            const fillCombo = (id) => {
                const el = document.getElementById(id);
                if(!el) return;
                const first = el.firstElementChild;
                el.innerHTML = "";
                el.appendChild(first);

                for(const [grp, items] of Object.entries(comboGroups)) {
                    const og = document.createElement('optgroup');
                    og.label = grp;
                    items.forEach(it => {
                        const op = document.createElement('option');
                        op.value = it;
                        op.text = it;
                        if(grp === "Abilities") op.setAttribute('data-cat', 'ability');
                        if(grp === "Visuals") op.setAttribute('data-cat', 'visual');
                        if(grp === "Size") op.setAttribute('data-cat', 'size');
                        if(grp === "Tinies" || grp === "Stats") op.setAttribute('data-cat', 'tiny');
                        og.appendChild(op);
                    });
                    el.appendChild(og);
                }
            };
            fillCombo('combo1');
            fillCombo('combo2');
        }

        function toggleEffect(eff, btn) {
            if (selectedEffects.has(eff)) {
                selectedEffects.delete(eff);
                btn.classList.remove('active');
                btn.innerHTML = `<i class="fa-solid fa-plus"></i> ${eff}`;
            } else {
                if (selectedEffects.size >= 5) return;
                selectedEffects.add(eff);
                btn.classList.add('active');
                btn.innerHTML = `<i class="fa-solid fa-check"></i> ${eff}`;
            }
            updateBuilder();
        }

        function updateBuilder() {
            const resDiv = document.getElementById('builderResults');
            if(!resDiv) return;
            
            const data = translations.sections.builder;
            const activeSet = document.getElementById('colorSetSelect').value;

            // Labels update
            document.getElementById('lblStep1').innerText = data.step1[currentLang];
            document.getElementById('lblStep2').innerText = data.step2[currentLang];
            document.getElementById('lblRes').innerText = data.result[currentLang];
            document.getElementById('lblPreview').innerText = data.preview[currentLang];
            document.getElementById('optNone').innerText = data.none[currentLang];

            if (selectedEffects.size === 0 && !activeSet) {
                resDiv.innerHTML = `<p style="color:#666; font-style:italic;">${data.empty[currentLang]}</p>`;
            } else {
                resDiv.innerHTML = "";
                selectedEffects.forEach(eff => {
                    const effData = EFFECT_DATA[eff] || { desc: {de:"-"}, stats:{de:[]} };
                    const desc = effData.desc[currentLang] || effData.desc.de || "-";
                    const stats = effData.stats[currentLang] || effData.stats.de || [];
                    
                    const item = document.createElement('div');
                    item.style.marginBottom = "10px";
                    item.innerHTML = `
                        <div style="font-weight:bold; color:#fff;">${eff}</div>
                        <div style="font-size:0.8rem; color:#aaa; margin-bottom:4px;">${desc}</div>
                        ${stats.map(s => `<div class="result-stat"><span>${data.bonus[currentLang]}</span><span>${s}</span></div>`).join('')}
                    `;
                    resDiv.appendChild(item);
                });
            }

            const prevCont = document.getElementById('builderColorPreview');
            if(activeSet) {
                prevCont.style.display = 'block';
                const setData = COLOR_SETS.find(s => s.name === activeSet);
                if(setData) {
                     document.getElementById('builderColorCircles').innerHTML = setData.ids.map(id => 
                        `<div class="color-circle" style="background-color:${getColorHex(id)}" title="ID: ${id}"></div>`
                    ).join('');
                }
            } else {
                prevCont.style.display = 'none';
            }
        }

        // --- COMBO CHECKER LOGIC ---
        function checkCombo() {
            const data = translations.sections.combo;
            
            document.getElementById('comboTitle').innerHTML = `<i class="fa-solid fa-calculator"></i> ${data.title[currentLang]}`;
            document.getElementById('comboDesc').innerText = data.desc[currentLang];
            document.getElementById('optDef1').innerText = data.select1[currentLang];
            document.getElementById('optDef2').innerText = data.select2[currentLang];

            const sel1 = document.getElementById('combo1');
            const sel2 = document.getElementById('combo2');
            const resDiv = document.getElementById('comboResult');
            const val1 = sel1.value;
            const val2 = sel2.value;

            if (!val1 || !val2) {
                resDiv.innerHTML = `<span style="color: #aaa; font-style: italic;">${data.empty_res[currentLang]}</span>`;
                resDiv.style.backgroundColor = 'rgba(0,0,0,0.5)';
                resDiv.style.border = 'none';
                return;
            }

            const cat1 = sel1.options[sel1.selectedIndex].getAttribute('data-cat');
            const cat2 = sel2.options[sel2.selectedIndex].getAttribute('data-cat');
            let status = 'ok';
            let message = data.ok[currentLang];
            let icon = '<i class="fa-solid fa-check-circle" style="font-size: 2rem; margin-bottom: 10px;"></i>';
            let color = '#4CAF50';

            if (val1 === val2) {
                status = 'error'; message = data.err_same[currentLang];
            } else if (cat1 === cat2) {
                status = 'error'; message = data.err_cat[currentLang];
            } else if ((cat1 === 'tiny' && ['ability','size'].includes(cat2)) || (cat2 === 'tiny' && ['ability','size'].includes(cat1))) {
                status = 'error'; message = data.err_tiny[currentLang];
            } else if (val1 === 'Skeletal' || val2 === 'Skeletal') {
                const other = val1 === 'Skeletal' ? cat2 : cat1;
                if(other === 'size' || other === 'tiny') {
                    status = 'warning'; message = data.warn_skel[currentLang]; color = '#FFC107'; 
                    icon = '<i class="fa-solid fa-triangle-exclamation" style="font-size: 2rem; margin-bottom: 10px;"></i>';
                }
            }

            if (status === 'error') {
                color = '#F44336';
                icon = '<i class="fa-solid fa-circle-xmark" style="font-size: 2rem; margin-bottom: 10px;"></i>';
            }

            resDiv.innerHTML = `<div style="color: ${color}; font-weight: bold;">${icon}<br>${message}</div>`;
            resDiv.style.backgroundColor = `${color}22`;
            resDiv.style.border = `1px solid ${color}`;
        }

        // --- SEARCH ---
        document.getElementById('searchInput').addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase();
            // Filter Cards in Variants
            document.querySelectorAll('.shiny-card').forEach(c => {
                const t = c.querySelector('.card-title').innerText.toLowerCase();
                if(t.includes(term)) c.classList.remove('hidden'); else c.classList.add('hidden');
            });
            // Re-render colors if active
            if(document.getElementById('colors').classList.contains('active')) renderColorSets();
        });

        // --- MODAL ---
        const modal = document.getElementById('shinyModal');
        
        function openModal(data) {
            document.getElementById('modalImg').src = data.img;
            document.getElementById('modalTitle').innerText = data.title;
            document.getElementById('modalLore').innerHTML = data.lore[currentLang] || data.lore.en;
            document.getElementById('modalAbilities').innerHTML = data.abs[currentLang] || data.abs.en;
            
            // Labels
            document.getElementById('loreSectionTitle').innerHTML = `<i class="fa-solid fa-scroll"></i> ${translations.sections.modal.lore[currentLang]}`;
            document.getElementById('abilitiesSectionTitle').innerHTML = `<i class="fa-solid fa-bolt"></i> ${translations.sections.modal.abilities[currentLang]}`;
            
            // Show texts
            document.getElementById('loreSectionTitle').style.display = 'block';
            document.getElementById('abilitiesSectionTitle').style.display = 'block';
            document.getElementById('modalLore').style.display = 'block';
            document.getElementById('modalAbilities').style.display = 'block';
            
            modal.classList.add('active');
        }

        function openImageModal(src, title) {
            document.getElementById('modalImg').src = src;
            document.getElementById('modalTitle').innerText = title;
            // Hide texts
            document.getElementById('loreSectionTitle').style.display = 'none';
            document.getElementById('abilitiesSectionTitle').style.display = 'none';
            document.getElementById('modalLore').style.display = 'none';
            document.getElementById('modalAbilities').style.display = 'none';
            modal.classList.add('active');
        }
        
        function closeModal() { modal.classList.remove('active'); }
        modal.addEventListener('click', (e) => { if(e.target===modal) closeModal(); });

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            initBuilder();
            setLang('de');
        });

    </script>
</body>
</html>
