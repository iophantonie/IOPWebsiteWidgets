<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Restart Countdown</title>
    <style>
        /* Wichtig: Der Body des iFrames muss transparent sein. */
        body {
            background-color: transparent;
            font-family: sans-serif;
            color: #ffffff;
            margin: 0;
            padding: 0;
            /* Extra Padding für den Box-Shadow */
            padding: 20px; 
            display: flex;
            justify-content: center;
        }

        /* Stil für die einzelne Statistik-Card, angepasst für den Countdown */
        .countdown-card {
            background-color: rgba(0, 0, 0, 0.85);
            border-radius: 12px;
            padding: 1.5rem 1rem;
            text-align: center;
            /* FEUERROT AKZENT */
            border-bottom: 3px solid #E53935;
            
            width: 100%;
            max-width: 350px; /* Etwas breiter als die kleinen Widgets */
            min-height: 140px; 
            
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease-in-out;
            cursor: default;
        }
        
        /* Hover-Effekt: Leichter Lift und Glow */
        .countdown-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.6), 
                        /* FEUERROT GLOW */
                        0 0 15px rgba(229, 57, 53, 0.7); 
        }
        
        /* NEU: Vor-Titel für den Timer */
        .timer-pre-label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #E53935; /* Feuerrot, um auf die Zahl aufmerksam zu machen */
            opacity: 0.9;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        /* Countdown-Wert */
        .countdown-value {
            font-size: 2.25rem;
            font-weight: 800;
            /* FEUERROT ZAHL */
            color: #E53935;
            line-height: 1.1;
            margin-bottom: 0.25rem;
        }
        
        /* Stil für den aktiven Neustart */
        .active-restart {
            color: #388E3C; /* Grün, um die Verfügbarkeit zu signalisieren */
            font-size: 2rem;
        }

        /* Countdown-Label */
        .countdown-label {
            font-size: 1rem;
            font-weight: 500;
            color: #ffffff;
            opacity: 0.8;
            text-transform: uppercase;
        }
        
        /* Stil für den statischen Infotext */
        .restart-static-info {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="countdown-card">
        <!-- NEU: Feste Beschriftung -->
        <div class="timer-pre-label">Nächster Neustart in:</div>
        
        <!-- Der Countdown-Wert -->
        <div id="countdown-timer" class="countdown-value">--:--:--</div>
        <!-- Die Beschreibung (zeigt den nächsten Neustart an) -->
        <div id="countdown-info" class="countdown-label"></div>
        
        <!-- Statische Information zu den Neustartzeiten -->
        <div class="restart-static-info">
            Server Neustarts: 00:00 Uhr & 12:00 Uhr
        </div>
    </div>

    <script>
        const timerElement = document.getElementById('countdown-timer');
        const infoElement = document.getElementById('countdown-info');

        // Die tatsächlichen Neustartzeiten in Minuten (00:00 = 0, 12:00 = 720)
        const restartTargetMinutes = [
            0,     // 00:00 Uhr (Mitternacht)
            12 * 60 // 12:00 Uhr (Mittag)
        ];
        
        const RESTART_WINDOW_MINUTES = 30; // 30 Minuten Vorlauf für den Countdown
        const RESTART_DURATION_MINUTES = 10; // Neustart dauert 10 Minuten (00:00 bis 00:10)
        
        function updateCountdown() {
            const now = new Date();
            const todayMinutes = now.getHours() * 60 + now.getMinutes();
            const nowSeconds = now.getSeconds();
            const totalNowSeconds = todayMinutes * 60 + nowSeconds;

            let nextRestartTargetMinutes = null;
            let nextRestartTargetSeconds = null; // Target in Sekunden seit Mitternacht
            let nextRestartTimeStr = "";
            
            // 1. Finde den nächsten tatsächlichen Neustart-Zielpunkt (in Sekunden)
            for (let i = 0; i < restartTargetMinutes.length; i++) {
                const targetSeconds = restartTargetMinutes[i] * 60;
                
                // Wir suchen den nächsten Target-Zeitpunkt, der in der Zukunft liegt
                if (targetSeconds > totalNowSeconds) {
                    nextRestartTargetMinutes = restartTargetMinutes[i];
                    nextRestartTargetSeconds = targetSeconds;
                    
                    const targetHours = Math.floor(nextRestartTargetMinutes / 60) % 24;
                    const targetMins = nextRestartTargetMinutes % 60;
                    nextRestartTimeStr = `${targetHours.toString().padStart(2, '0')}:${targetMins.toString().padStart(2, '0')} Uhr`;
                    break;
                }
            }
            
            // 2. Wenn der nächste Neustart am nächsten Tag liegt (z.B. nach 23:59 Uhr)
            if (nextRestartTargetSeconds === null) {
                // Der nächste Neustart ist 00:00 Uhr am nächsten Tag
                nextRestartTargetMinutes = restartTargetMinutes[0] + (24 * 60); 
                nextRestartTargetSeconds = nextRestartTargetMinutes * 60;
                nextRestartTimeStr = "00:00 Uhr";
            }
            
            // 3. --- PRÜFUNG DES AKTIVEN NEUSTARTS (00:00 bis 00:10) ---
            
            // Das Fenster muss für JEDEN Neustart geprüft werden
            let isRestartActive = false;
            
            for (let i = 0; i < restartTargetMinutes.length; i++) {
                const restartStartSeconds = restartTargetMinutes[i] * 60;
                const restartEndSeconds = restartStartSeconds + (RESTART_DURATION_MINUTES * 60);

                if (totalNowSeconds >= restartStartSeconds && totalNowSeconds < restartEndSeconds) {
                    isRestartActive = true;
                    break;
                }
            }
            
            // Wenn der Neustart AKTIV ist
            if (isRestartActive) {
                timerElement.textContent = 'SERVER NEUSTART LÄUFT';
                timerElement.classList.add('active-restart');
                infoElement.textContent = `BITTE KURZ WARTEN (ca. ${RESTART_DURATION_MINUTES} MINUTEN)`;
                return;
            } else {
                timerElement.classList.remove('active-restart');
            }

            // 4. --- COUNTDOWN BERECHNUNG ---

            // Zeit bis zum Neustart-Ziel (in Sekunden)
            let secondsUntilTarget = nextRestartTargetSeconds - totalNowSeconds;
            
            // Wenn die Zeit bis zum Neustart unter dem Countdown-Fenster liegt (30 Minuten)
            const secondsInWindow = RESTART_WINDOW_MINUTES * 60;

            if (secondsUntilTarget <= secondsInWindow && secondsUntilTarget > 0) {
                // Countdown ist aktiv (weniger als 30 Minuten bis zum Neustart)
                
                // Konvertiere Sekunden in H:M:S Format
                const hours = Math.floor(secondsUntilTarget / 3600);
                const minutes = Math.floor((secondsUntilTarget % 3600) / 60);
                const seconds = secondsUntilTarget % 60;

                const formattedTime = [hours, minutes, seconds]
                    .map(t => t.toString().padStart(2, '0'))
                    .join(':');

                timerElement.textContent = formattedTime;
                infoElement.textContent = `NUR NOCH BIS: ${nextRestartTimeStr}`;
            } else {
                // Countdown ist inaktiv (mehr als 30 Minuten entfernt)
                
                // Wir berechnen die Zeit bis zum Countdown-Start (30 Minuten vor Neustart)
                const totalSecondsUntilCountdownStart = secondsUntilTarget - secondsInWindow;
                
                const hoursUntilStart = Math.floor(totalSecondsUntilCountdownStart / 3600);
                const minutesUntilStart = Math.floor((totalSecondsUntilCountdownStart % 3600) / 60);
                const secondsUntilStart = totalSecondsUntilCountdownStart % 60;

                const formattedTimeUntilStart = [hoursUntilStart, minutesUntilStart, secondsUntilStart]
                    .map(t => t.toString().padStart(2, '0'))
                    .join(':');

                timerElement.textContent = formattedTimeUntilStart;
                infoElement.textContent = `COUNTDOWN STARTET VOR: ${nextRestartTimeStr}`;
            }
        }

        // Starte den Countdown und aktualisiere jede Sekunde
        updateCountdown();
        setInterval(updateCountdown, 1000); 

    </script>
</body>
</html>
