<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Einstellungen Akkordeon</title>
    <link href="https://fonts.googleapis.com/css2?family=Acme:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Farben und Schriftarten */
        :root {
            --color-red: #E53935; /* Feuerrot */
            --color-dark: rgba(20, 20, 20, 0.95);
            --color-text: #f7f7f7;
            --color-light-dark: rgba(30, 30, 30, 0.95);
            --color-gold: #FFEB3B;
            
            /* Akzente */
            --color-accent-header: var(--color-red); 
            --color-cap: #D32F2F; /* Dunkles Rot für Item Caps */
            
            /* DINO FARBEN */
            --color-tek: #5DADE2;           /* Blau: Tek Dinos */
            --color-wyvern-red: #FF4444;    /* Rot: Wyvern */
            --color-rockdrake: #9B59B6;     /* Lila: Rock Drakes */
            --color-crystal-yellow: #F7DC6F; /* Gelblich: Crystal Wyvern/Oliv */

            /* RÜSTUNGSFARBEN */
            --color-swat: #5D6D7E; 
            --color-flak: #AAB7B8; 
            --color-chitin: #A569BD; 
            --color-fur: #F4D03F; 
            --color-ghillie: #58D68D;

            /* RATEN FARBEN */
            --color-rate-accent: var(--color-red); 
            
            --font-main: sans-serif;
            --font-header: 'Acme', var(--font-main);
        }

        /* Wichtig: Der Body des iFrames muss transparent sein. */
        body {
            background-color: transparent;
            font-family: var(--font-main);
            color: var(--color-text);
            margin: 0;
            padding: 20px; 
            display: flex;
            justify-content: center;
            width: 100%; 
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Haupt-Card Container */
        .settings-card-main {
            background-color: var(--color-dark);
            border-radius: 12px;
            border: 3px solid var(--color-red);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            
            width: 100%;
            max-width: 1600px;
            
            /* Grid-Layout: Header oben fix, Content unten flexibel */
            display: grid;
            grid-template-rows: auto 1fr;
            grid-template-columns: 100%;
            padding: 1.5rem;
            box-sizing: border-box;
            position: relative; /* Wichtig für Flaggen */
        }

        /* --- FLAGGEN (Aus Bulletproof übernommen) --- */
        .lang-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 200;
        }
        .lang-btn {
            width: 30px; height: 20px;
            cursor: pointer;
            border-radius: 3px;
            border: 1px solid #fff;
            opacity: 0.5;
            transition: transform 0.2s, opacity 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }
        .lang-btn:hover, .lang-btn.active {
            opacity: 1; transform: scale(1.15);
            border-color: var(--color-red);
            z-index: 10;
        }
        
        /* HAUPTÜBERSCHRIFT */
        .main-widget-header {
            font-size: 2rem;
            font-weight: 800;
            color: var(--color-accent-header);
            font-family: var(--font-header);
            text-transform: uppercase;
            text-align: center;
            border-bottom: 3px solid var(--color-accent-header);
            padding-bottom: 10px;
            margin: 0 140px 20px 0; /* Rechts Platz für Flaggen */
        }

        /* --- HAUPT-CONTENT-BEREICH (Split Layout) --- */
        .main-content-grid {
            display: flex; 
            gap: 20px;
            min-height: 600px;
            width: 100%;
        }

        /* --- LINKES NAVIGATIONS-MENÜ --- */
        .left-nav {
            flex: 0 0 260px; 
            background-color: var(--color-light-dark);
            border-radius: 8px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
            height: fit-content;
        }
        
        /* Trenn-Header im Menü */
        .nav-group-separator {
            font-family: var(--font-header);
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-red);
            text-transform: uppercase;
            margin: 15px 0 5px 0;
            padding: 5px 15px;
            border-bottom: 1px dashed var(--color-red);
            letter-spacing: 1px;
        }
        .nav-group-separator:first-child { margin-top: 0; }

        .accordion-header {
            background-color: transparent;
            padding: 12px 15px;
            font-size: 1rem;
            font-weight: 800;
            color: var(--color-text);
            font-family: var(--font-header);
            cursor: pointer;
            border-left: 4px solid transparent; 
            transition: all 0.2s;
            text-align: left;
            border-radius: 0 4px 4px 0;
        }

        .accordion-header:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        /* Zustand für aktiven Button */
        .accordion-header.active {
             background-color: rgba(40, 40, 40, 0.95);
             border-left-color: var(--color-gold); 
             color: var(--color-gold); 
             text-shadow: 0 0 8px rgba(255, 235, 59, 0.6); 
        }

        /* --- RECHTER INHALTSBEREICH --- */
        .right-content-area {
            flex-grow: 1; 
            background-color: var(--color-light-dark);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .accordion-content {
            display: none;
            width: 100%;
        }
        
        .accordion-content.active {
            display: block;
        }

        /* --- ANIMATIONEN --- */
        @keyframes fadeInMove {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animated-content {
            opacity: 0;
            animation: fadeInMove 0.5s ease-out forwards;
        }

        /* --- INHALTSSTILE --- */
        .section-header-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--color-text);
            font-family: var(--font-header);
            margin-bottom: 1rem;
            padding-left: 10px;
            border-left: 5px solid var(--color-red);
            text-transform: uppercase;
        }
        
        .sub-section-title {
            display: block;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-text);
            margin-top: 20px;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-family: var(--font-header);
        }

        .description {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }
        
        .description ul, .description ol {
            margin-top: 5px;
            padding-left: 25px;
        }
        .description li {
            margin-bottom: 5px;
        }

        /* TABELLEN-STIL */
        .table-container {
            width: 100%;
        }
        
        .rates-flex-wrapper {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .rates-table-block {
            flex: 1 1 400px; 
        }

        .caps-table {
            width: 100%;
            border-collapse: collapse;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .caps-table th, .caps-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .caps-table th {
            background-color: rgba(255, 255, 255, 0.08); 
            font-size: 0.95rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--color-text);
            border-bottom: 2px solid var(--color-accent-header);
        }
        .caps-table td { 
            font-size: 1rem; 
            color: var(--color-text); 
            font-weight: 500;
        }
        .caps-table tr:hover { background-color: rgba(255, 255, 255, 0.05); }

        /* Spezifische Spaltenstile */
        .max-value-col, .multiplier-col {
            text-align: right !important;
            font-weight: 700;
        }
        .multiplier-col { color: var(--color-rate-accent); }
        .max-value-col { color: var(--color-cap); }

        /* FARBEN FÜR DINO LEVEL & TYPEN */
        .tek-row .item-col, .tek-row .max-value-col { color: var(--color-tek) !important; }
        .wyvern-row .item-col, .wyvern-row .max-value-col { color: var(--color-wyvern-red) !important; }
        .rockdrake-row .item-col, .rockdrake-row .max-value-col { color: var(--color-rockdrake) !important; }
        .crystal-row .item-col, .crystal-row .max-value-col { color: var(--color-crystal-yellow) !important; }
        
        /* Farben für Rüstungen */
        .swat-row .item-col { color: var(--color-swat) !important; }
        .flak-row .item-col { color: var(--color-flak) !important; }
        .chitin-row .item-col { color: var(--color-chitin) !important; }
        .fur-row .item-col { color: var(--color-fur) !important; }
        .ghillie-row .item-col { color: var(--color-ghillie) !important; }

        /* Lokales Akkordeon (Prog Lvl) */
        .local-accordion-header {
            background-color: rgba(255, 215, 0, 0.1);
            color: var(--color-gold);
            padding: 15px;
            font-weight: 700;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        .local-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }
        .local-accordion-content.active {
            max-height: 2000px;
        }
        .local-arrow { transition: transform 0.3s; }
        .local-accordion-header.active .local-arrow { transform: rotate(90deg); }

        /* Responsive */
        @media (max-width: 850px) {
            .main-content-grid { flex-direction: column; }
            .left-nav { flex: 1; width: 100%; order: -1; }
        }
    </style>
</head>
<body>

    <div class="settings-card-main">
        
        <!-- FLAGGEN NAVIGATION -->
        <div class="lang-switch">
            <svg class="lang-btn active" id="btn-de" onclick="setLanguage('de')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5 3">
                <rect width="5" height="3" fill="#000"/><rect width="5" height="2" y="1" fill="#D00"/><rect width="5" height="1" y="2" fill="#FFCE00"/>
            </svg>
            <svg class="lang-btn" id="btn-en" onclick="setLanguage('en')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30">
                <clipPath id="s"><path d="M0,0 v30 h60 v-30 z"/></clipPath>
                <clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath>
                <g clip-path="url(#s)">
                    <path d="M0,0 v30 h60 v-30 z" fill="#012169"/>
                    <path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/>
                    <path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#C8102E" stroke-width="4"/>
                    <path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/>
                    <path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/>
                </g>
            </svg>
            <svg class="lang-btn" id="btn-es" onclick="setLanguage('es')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 500">
                <rect width="750" height="500" fill="#AA151B"/>
                <rect width="750" height="250" y="125" fill="#F1BF00"/>
            </svg>
            <svg class="lang-btn" id="btn-fr" onclick="setLanguage('fr')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
                <rect width="900" height="600" fill="#ED2939"/>
                <rect width="600" height="600" fill="#fff"/>
                <rect width="300" height="600" fill="#002395"/>
            </svg>
        </div>
        
        <div class="main-widget-header" id="mainHeader">Server Einstellungen & Balancing</div>

        <div class="main-content-grid">
            
            <!-- LINKE NAVIGATION (Wird per JS gefüllt) -->
            <div class="left-nav" id="leftNavContainer"></div>
            
            <!-- RECHTER INHALT (Wird per JS gefüllt) -->
            <div class="right-content-area" id="rightContentContainer"></div>
        </div>
    </div>

    <script>
        // =========================================================================
        // 1. DATENBANK (ÜBERSETZUNGEN)
        // =========================================================================
        const translations = {
            meta: {
                header: { de: "Server Einstellungen & Balancing", en: "Server Settings & Balancing", es: "Ajustes del Servidor y Balanceo", fr: "Paramètres du Serveur et Équilibrage" }
            },
            // Navigation
            nav: {
                group_server: { de: "Server Einstellungen", en: "Server Settings", es: "Ajustes del Servidor", fr: "Paramètres Serveur" },
                group_mod: { de: "Mod Einstellungen", en: "Mod Settings", es: "Ajustes de Mods", fr: "Paramètres Mods" },
                items: [
                    { id: 'decay', de: 'Decay Einstellungen', en: 'Decay Settings', es: 'Ajustes de Deterioro', fr: 'Paramètres de Dégradation' },
                    { id: 'dino-level', de: 'Dino Level Limits', en: 'Dino Level Limits', es: 'Límites de Nivel de Dino', fr: 'Limites de Niveau des Dinos' },
                    { id: 'gesperrt', de: 'Gesperrte Strukturen & Dinos', en: 'Blocked Structures & Dinos', es: 'Estructuras y Dinos Bloqueados', fr: 'Structures et Dinos Bloqués' },
                    { id: 'item-caps', de: 'Item & Crafting Caps', en: 'Item & Crafting Caps', es: 'Límites de Items y Crafting', fr: 'Limites d\'Objets et Crafting' },
                    { id: 'limits', de: 'Strukturen & Dino Limits', en: 'Structure & Dino Limits', es: 'Límites de Estructuras y Dinos', fr: 'Limites Structures et Dinos' },
                    { id: 'player-stats', de: 'Spieler/Dino Stat Einstellungen', en: 'Player/Dino Stat Settings', es: 'Estadísticas Jugador/Dino', fr: 'Stats Joueur/Dino' },
                    { id: 'rates', de: 'Server Raten', en: 'Server Rates', es: 'Tasas del Servidor', fr: 'Taux du Serveur' },
                    { id: 'restarts', de: 'Server Neustarts', en: 'Server Restarts', es: 'Reinicios del Servidor', fr: 'Redémarrages Serveur' },
                    { id: 'travel', de: 'Travel Einstellungen', en: 'Travel Settings', es: 'Ajustes de Viaje', fr: 'Paramètres de Voyage' },
                    { id: 'cs', de: 'CS Einstellungen', en: 'CS Settings', es: 'Ajustes CS', fr: 'Paramètres CS' },
                    { id: 'pcs', de: 'PCS Einstellungen', en: 'PCS Settings', es: 'Ajustes PCS', fr: 'Paramètres PCS' }
                ]
            },
            // Inhalte
            sections: {
                decay: {
                    title: { de: 'Decay Einstellungen', en: 'Decay Settings', es: 'Ajustes de Deterioro', fr: 'Paramètres de Dégradation' },
                    desc: { 
                        de: 'Die Verfallstimer basieren auf dem progressiven Level System (Prog Lvl) und variieren je nach Spielerlevel.', 
                        en: 'Decay timers are based on the progressive level system (Prog Lvl) and vary by player level.',
                        es: 'Los temporizadores de deterioro se basan en el sistema de nivel progresivo (Prog Lvl) und varían según el nivel del jugador.',
                        fr: 'Les minuteurs de dégradation sont basés sur le système de niveau progressif (Prog Lvl) et varient selon le niveau du joueur.'
                    },
                    accordion_btn: { de: 'Prog Lvl Decay-Limits anzeigen', en: 'Show Prog Lvl Decay Limits', es: 'Ver límites de deterioro Prog Lvl', fr: 'Voir les limites de dégradation Prog Lvl' },
                    table_header_lvl: { de: 'Level Bereich', en: 'Level Range', es: 'Rango de Nivel', fr: 'Plage de Niveau' },
                    table_header_time: { de: 'Decay Zeit', en: 'Decay Time', es: 'Tiempo de Deterioro', fr: 'Temps de Dégradation' },
                    wild_title: { de: 'Regeln für den Wildbau-Verfall', en: 'Wild Build Decay Rules', es: 'Reglas de Deterioro de Construcción Salvaje', fr: 'Règles de Dégradation des Constructions Sauvages' },
                    wild_general: { de: 'Allgemein gilt:', en: 'General Rules:', es: 'Reglas Generales:', fr: 'Règles Générales :' },
                    wild_list: {
                        de: [
                            'Täglich wird um <strong>01:00 Uhr</strong> eine automatische Entfernung von Wildbauten durchgeführt.',
                            'Der Spieler mit dem höchsten Verfallswert (Decay) gibt den Verfallstimer für den Stamm vor.',
                            'Alle Strukturen-Arten haben denselben Verfallstimer.'
                        ],
                        en: [
                            'Automatic removal of wild builds occurs daily at <strong>01:00 AM</strong>.',
                            'The player with the highest decay value sets the decay timer for the tribe.',
                            'All structure types have the same decay timer.'
                        ],
                        es: [
                            'La eliminación automática de construcciones salvajes ocurre diariamente a las <strong>01:00 AM</strong>.',
                            'El jugador con el mayor valor de deterioro establece el temporizador para la tribu.',
                            'Todos los tipos de estructuras tienen el mismo temporizador.'
                        ],
                        fr: [
                            'La suppression automatique des constructions sauvages a lieu tous les jours à <strong>01:00</strong>.',
                            'Le joueur avec la plus haute valeur de dégradation définit le minuteur pour la tribu.',
                            'Tous les types de structures ont le même minuteur de dégradation.'
                        ]
                    },
                    unit_days: { de: 'Tage', en: 'Days', es: 'Días', fr: 'Jours' },
                    level_text: { de: 'Level', en: 'Level', es: 'Nivel', fr: 'Niveau' },
                    from_text: { de: 'Ab', en: 'From', es: 'Desde', fr: 'De' }
                },
                rates: {
                    title: { de: 'Server Raten', en: 'Server Rates', es: 'Tasas del Servidor', fr: 'Taux du Serveur' },
                    desc: { de: 'Unsere Server-Einstellungen bieten optimierte Raten für ein ausbalanciertes Spielerlebnis.', en: 'Our server settings offer optimized rates for a balanced gaming experience.', es: 'Nuestra configuración ofrece tasas optimizadas para una experiencia equilibrada.', fr: 'Nos paramètres offrent des taux optimisés pour une expérience équilibrée.' },
                    weekdays: { de: 'Werktags-Raten', en: 'Weekday Rates', es: 'Tasas de Día Laborable', fr: 'Taux de Semaine' },
                    weekend: { de: 'Wochenend-Raten', en: 'Weekend Rates', es: 'Tasas de Fin de Semana', fr: 'Taux de Week-end' },
                    time_week: { de: 'Montag 00:00 - Freitag 00:00 Uhr', en: 'Monday 00:00 - Friday 00:00', es: 'Lunes 00:00 - Viernes 00:00', fr: 'Lundi 00:00 - Vendredi 00:00' },
                    time_weekend: { de: 'Freitag 00:00 - Montag 00:00 Uhr', en: 'Friday 00:00 - Monday 00:00', es: 'Viernes 00:00 - Lunes 00:00', fr: 'Vendredi 00:00 - Lundi 00:00' },
                    labels: { 
                        xp: { de: 'XP-Rate', en: 'XP Rate', es: 'Tasa XP', fr: 'Taux XP' },
                        farm: { de: 'Farmen', en: 'Harvesting', es: 'Cosecha', fr: 'Récolte' },
                        tame: { de: 'Zähmung', en: 'Taming', es: 'Domesticación', fr: 'Apprivoisement' },
                        breed: { de: 'Brüten', en: 'Breeding', es: 'Crianza', fr: 'Élevage' },
                        mature: { de: 'Reifen', en: 'Maturation', es: 'Maduración', fr: 'Maturation' }
                    },
                    balancing: { de: 'Balancing Info', en: 'Balancing Info', es: 'Info Balanceo', fr: 'Info Équilibrage' },
                    wild_dmg: { de: 'Wild Dino Schaden', en: 'Wild Dino Damage', es: 'Daño Dino Salvaje', fr: 'Dégâts Dino Sauvage' },
                    wild_desc: { de: 'Aus Balancing-Gründen machen wilde Dinos den Spielern doppelten Schaden.', en: 'For balancing reasons, wild dinos deal double damage to players.', es: 'Por razones de equilibrio, los dinos salvajes hacen doble daño.', fr: 'Pour des raisons d\'équilibrage, les dinos sauvages infligent le double de dégâts.' }
                },
                dino_level: {
                    title: { de: 'Dino Level Limits', en: 'Dino Level Limits', es: 'Límites de Nivel de Dino', fr: 'Limites de Niveau des Dinos' },
                    desc: { de: 'Maximale Dino-Level für verschiedene Kreaturtypen:', en: 'Max dino levels for different creature types:', es: 'Niveles máximos para diferentes tipos de criaturas:', fr: 'Niveaux max des dinos pour différents types :' },
                    headers: { type: { de: 'Dino Typ', en: 'Dino Type', es: 'Tipo de Dino', fr: 'Type de Dino' }, max: { de: 'Max Level', en: 'Max Level', es: 'Nivel Máx', fr: 'Niveau Max' } },
                    types: {
                        std: { de: 'Standard Dinos', en: 'Standard Dinos', es: 'Dinos Estándar', fr: 'Dinos Standard' },
                        tek: { de: 'Tek Dinos', en: 'Tek Dinos', es: 'Dinos Tek', fr: 'Dinos Tek' },
                        wyvern: { de: 'Wyvern', en: 'Wyvern', es: 'Wyvern', fr: 'Wyvern' },
                        rock: { de: 'Rock Drakes', en: 'Rock Drakes', es: 'Rock Drakes', fr: 'Rock Drakes' },
                        crystal: { de: 'Crystal Wyvern', en: 'Crystal Wyvern', es: 'Crystal Wyvern', fr: 'Crystal Wyvern' }
                    }
                },
                item_caps: {
                    title: { de: 'Item & Crafting Caps', en: 'Item & Crafting Caps', es: 'Límites de Items y Crafting', fr: 'Limites d\'Objets et Crafting' },
                    armor_title: { de: 'Rüstungs Caps', en: 'Armor Caps', es: 'Límites de Armadura', fr: 'Limites d\'Armure' },
                    headers: { type: { de: 'Rüstungstyp', en: 'Armor Type', es: 'Tipo de Armadura', fr: 'Type d\'Armure' }, max: { de: 'Max Wert', en: 'Max Value', es: 'Valor Máx', fr: 'Valeur Max' } },
                    items: {
                        tek: { de: 'Tek-Rüstung', en: 'Tek Armor', es: 'Armadura Tek', fr: 'Armure Tek' },
                        swat: { de: 'SWAT-Rüstung', en: 'SWAT Armor', es: 'Armadura SWAT', fr: 'Armure SWAT' },
                        flak: { de: 'Flak-Rüstung', en: 'Flak Armor', es: 'Armadura Flak', fr: 'Armure Flak' },
                        chitin: { de: 'Chitin-Rüstung', en: 'Chitin Armor', es: 'Armadura Quitina', fr: 'Armure Chitine' },
                        fur: { de: 'Pelz Rüstung', en: 'Fur Armor', es: 'Armadura de Piel', fr: 'Armure en Fourrure' },
                        ghillie: { de: 'Ghilli Rüstung', en: 'Ghillie Armor', es: 'Armadura Ghillie', fr: 'Armure Ghillie' }
                    },
                    weapon_title: { de: 'Waffen & Werkzeuge Cap', en: 'Weapons & Tools Cap', es: 'Límites Armas y Herramientas', fr: 'Limites Armes et Outils' },
                    weapon_desc: { de: 'Maximaler Schadenswert:', en: 'Max Damage Value:', es: 'Daño Máximo:', fr: 'Dégâts Max :' },
                    weapon_labels: { 
                        w: { de: 'Waffen (Nah/Fern)', en: 'Weapons (Melee/Ranged)', es: 'Armas', fr: 'Armes' },
                        t: { de: 'Werkzeuge', en: 'Tools', es: 'Herramientas', fr: 'Outils' }
                    },
                    saddle_title: { de: 'Sättel Cap', en: 'Saddle Cap', es: 'Límites Monturas', fr: 'Limites Selles' },
                    saddle_all: { de: 'Alle Sättel', en: 'All Saddles', es: 'Todas las Monturas', fr: 'Toutes les Selles' }
                },
                restarts: {
                    title: { de: 'Server Neustarts', en: 'Server Restarts', es: 'Reinicios del Servidor', fr: 'Redémarrages Serveur' },
                    desc: { de: 'Automatische Neustarts alle 12 Stunden. Countdown startet 30 Min vorher.', en: 'Automatic restarts every 12 hours. Countdown starts 30 mins prior.', es: 'Reinicios automáticos cada 12 horas. Cuenta atrás 30 min antes.', fr: 'Redémarrages auto toutes les 12 heures. Compte à rebours 30 min avant.' },
                    headers: { s: { de: 'Server / Cluster', en: 'Server / Cluster', es: 'Servidor / Clúster', fr: 'Serveur / Cluster' }, t: { de: 'Uhrzeit (MEZ)', en: 'Time (CET)', es: 'Hora (CET)', fr: 'Heure (CET)' } },
                    cluster_official: { de: 'Hauptcluster Officials', en: 'Maincluster Officials', es: 'Maincluster Officials', fr: 'Maincluster Officials' },
                    cluster_overhauls: { de: 'Overhaul Cluster', en: 'Overhaul Clusters', es: 'Overhaul Cluster', fr: 'Overhaul Cluster' },
                    cluster_modmaps: { de: 'Hauptcluster Modkarten', en: 'Maincluster Mod Maps', es: 'Maincluster Mod Maps', fr: 'Maincluster Mod Maps' },
                    cluster_other: { de: 'Community Server', en: 'Community Servers', es: 'Community Servers', fr: 'Community Servers' }
                },
                generic: {
                    title: { de: 'Inhalt folgt', en: 'Content coming soon', es: 'Contenido próximamente', fr: 'Contenu à venir' }
                }
            }
        };

        // =========================================================================
        // 2. LOGIC
        // =========================================================================
        let currentTabId = 'rates'; // Default Tab

        function setLanguage(lang) {
            // UI Buttons
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');
            
            // Render UI
            renderUI(lang);
        }

        function renderUI(lang) {
            // Main Header
            document.getElementById('mainHeader').textContent = translations.meta.header[lang];

            // 1. Render Left Nav
            const navContainer = document.getElementById('leftNavContainer');
            navContainer.innerHTML = '';
            
            // Separator Server
            const sep1 = document.createElement('div');
            sep1.className = 'nav-group-separator';
            sep1.textContent = translations.nav.group_server[lang];
            navContainer.appendChild(sep1);

            // Items (First part)
            const serverItems = ['decay', 'dino-level', 'gesperrt', 'item-caps', 'limits', 'player-stats', 'rates', 'restarts', 'travel'];
            serverItems.forEach(id => {
                const item = translations.nav.items.find(i => i.id === id);
                if(item) createNavButton(navContainer, id, item[lang]);
            });

            // Separator Mods
            const sep2 = document.createElement('div');
            sep2.className = 'nav-group-separator';
            sep2.textContent = translations.nav.group_mod[lang];
            navContainer.appendChild(sep2);

            // Items (Mods)
            const modItems = ['cs', 'pcs'];
            modItems.forEach(id => {
                const item = translations.nav.items.find(i => i.id === id);
                if(item) createNavButton(navContainer, id, item[lang]);
            });

            // 2. Render Content Areas (Alle erstellen, nur aktives zeigen)
            const contentContainer = document.getElementById('rightContentContainer');
            contentContainer.innerHTML = ''; // Reset

            const allIds = [...serverItems, ...modItems];
            allIds.forEach(id => {
                const wrapper = document.createElement('div');
                wrapper.id = 'content-' + id;
                wrapper.className = 'accordion-content';
                if(id === currentTabId) wrapper.classList.add('active');
                
                // Content generieren
                wrapper.innerHTML = generateContentHTML(id, lang);
                contentContainer.appendChild(wrapper);
            });

            // Re-apply active class to nav
            const activeNav = document.getElementById('nav-' + currentTabId);
            if(activeNav) activeNav.classList.add('active');
        }

        function createNavButton(container, id, text) {
            const div = document.createElement('div');
            div.id = 'nav-' + id;
            div.className = 'accordion-header';
            if(id === currentTabId) div.classList.add('active');
            div.textContent = text;
            div.onclick = () => switchTab(id);
            container.appendChild(div);
        }

        function generateContentHTML(id, lang) {
            const data = translations.sections[id];
            // Fallback für leere Sections
            if(!data || !data.title) {
                const t = translations.sections[id]?.title?.[lang] || translations.nav.items.find(i=>i.id===id)?.[lang];
                return `<div class="section-header-title">${t}</div><div class="description">${translations.sections.generic.title[lang]}</div>`;
            }

            // HTML Generierung je nach ID
            let html = `<div class="section-header-title animated-content">${data.title[lang]}</div>`;
            if(data.desc && typeof data.desc === 'object') {
                html += `<div class="description animated-content" style="animation-delay: 50ms">${data.desc[lang]}</div>`;
            }

            // --- DECAY SPECIAL ---
            if(id === 'decay') {
                // Table Data Generation
                let tableRows = '';
                const ranges = [
                    [1,9,5], [10,19,7], [20,29,10], [30,39,12], [40,49,14], [50,59,16], 
                    [60,69,18], [70,79,21], [80,89,25], [90,99,27], [100,104,30], 
                    [105,109,31], [110,114,32], [115,119,33], [120,124,34], [125,129,35], 
                    [130,134,36], [135,139,37], [140,144,38], [145,149,39], [150,154,40],
                    [155,159,41], [160,164,42], [165,169,43], [170,174,44], [175,179,45],
                    [180,184,46], [185,189,47], [190,194,48], [195,199,49]
                ];
                
                const lvlTxt = data.level_text[lang];
                const dayTxt = data.unit_days[lang];

                ranges.forEach(r => {
                    tableRows += `<tr><td>${lvlTxt} ${r[0]} - ${r[1]}</td><td class="max-value-col">${r[2]} ${dayTxt}</td></tr>`;
                });
                // Last row (200+)
                tableRows += `<tr><td>${data.from_text[lang]} ${lvlTxt} 200</td><td class="max-value-col">50 ${dayTxt}</td></tr>`;

                html += `
                <div class="local-accordion-header animated-content" onclick="toggleLocal(this)" style="animation-delay: 100ms">
                    <span>${data.accordion_btn[lang]}</span><span class="local-arrow">▶</span>
                </div>
                <div class="local-accordion-content">
                    <table class="caps-table" style="margin-top: 10px;">
                        <thead><tr><th>${data.table_header_lvl[lang]}</th><th style="text-align:right;">${data.table_header_time[lang]}</th></tr></thead>
                        <tbody>${tableRows}</tbody>
                    </table>
                </div>
                <div class="section-header-title animated-content" style="margin-top:30px; animation-delay: 150ms">${data.wild_title[lang]}</div>
                <div class="description animated-content" style="animation-delay: 200ms">
                    <span class="sub-section-title">${data.wild_general[lang]}</span>
                    <ul>${data.wild_list[lang].map(li => `<li>${li}</li>`).join('')}</ul>
                </div>`;
            }

            // --- RATES SPECIAL ---
            if(id === 'rates') {
                const labels = data.labels;
                const rowsWeek = `
                    <tr><td>${labels.xp[lang]}</td><td class="multiplier-col">1.0x</td></tr>
                    <tr><td>${labels.farm[lang]}</td><td class="multiplier-col">1.5x</td></tr>
                    <tr><td>${labels.tame[lang]}</td><td class="multiplier-col">2.0x</td></tr>
                    <tr><td>${labels.breed[lang]}</td><td class="multiplier-col">5.0x</td></tr>
                    <tr><td>${labels.mature[lang]}</td><td class="multiplier-col">5.0x</td></tr>
                `;
                const rowsWeekend = `
                    <tr><td>${labels.xp[lang]}</td><td class="multiplier-col">2.0x</td></tr>
                    <tr><td>${labels.farm[lang]}</td><td class="multiplier-col">3.0x</td></tr>
                    <tr><td>${labels.tame[lang]}</td><td class="multiplier-col">4.0x</td></tr>
                    <tr><td>${labels.breed[lang]}</td><td class="multiplier-col">10.0x</td></tr>
                    <tr><td>${labels.mature[lang]}</td><td class="multiplier-col">10.0x</td></tr>
                `;

                html += `
                <div class="rates-flex-wrapper animated-content" style="animation-delay: 100ms">
                    <div class="rates-table-block">
                        <div class="sub-section-title" style="color: var(--color-rate-accent); border-bottom: 1px solid var(--color-rate-accent); padding-bottom: 5px;">${data.weekdays[lang]}</div>
                        <table class="caps-table">${rowsWeek}</table>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${data.time_week[lang]}</div>
                    </div>
                    <div class="rates-table-block">
                        <div class="sub-section-title" style="color: var(--color-rate-accent); border-bottom: 1px solid var(--color-rate-accent); padding-bottom: 5px;">${data.weekend[lang]}</div>
                        <table class="caps-table">${rowsWeekend}</table>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${data.time_weekend[lang]}</div>
                    </div>
                </div>
                <div class="rates-table-block animated-content" style="margin-top: 20px; animation-delay: 150ms">
                    <div class="sub-section-title">${data.balancing[lang]}</div>
                    <table class="caps-table">
                        <tr><td>${data.wild_dmg[lang]}</td><td class="multiplier-col" style="color: var(--color-red);">x2.0</td></tr>
                    </table>
                    <div class="description">${data.wild_desc[lang]}</div>
                </div>`;
            }

            // --- DINO LEVEL SPECIAL ---
            if(id === 'dino-level') {
                html += `
                <table class="caps-table animated-content" style="animation-delay: 100ms">
                    <thead><tr><th>${data.headers.type[lang]}</th><th style="text-align:right;">${data.headers.max[lang]}</th></tr></thead>
                    <tbody>
                        <tr class="standard-row"><td class="item-col">${data.types.std[lang]}</td><td class="max-value-col">150</td></tr>
                        <tr class="tek-row"><td class="item-col">${data.types.tek[lang]}</td><td class="max-value-col">180</td></tr>
                        <tr class="wyvern-row"><td class="item-col">${data.types.wyvern[lang]}</td><td class="max-value-col">190</td></tr>
                        <tr class="rockdrake-row"><td class="item-col">${data.types.rock[lang]}</td><td class="max-value-col">190</td></tr>
                        <tr class="crystal-row"><td class="item-col">${data.types.crystal[lang]}</td><td class="max-value-col">225</td></tr>
                    </tbody>
                </table>`;
            }

            // --- CAPS SPECIAL ---
            if(id === 'item-caps') {
                html += `
                <div class="sub-section-title animated-content" style="animation-delay: 100ms">${data.armor_title[lang]}</div>
                <table class="caps-table animated-content" style="animation-delay: 150ms">
                    <thead><tr><th>${data.headers.type[lang]}</th><th style="text-align:right;">${data.headers.max[lang]}</th></tr></thead>
                    <tbody>
                        <tr class="tek-row"><td class="item-col">${data.items.tek[lang]}</td><td class="max-value-col">1125</td></tr>
                        <tr class="swat-row"><td class="item-col">${data.items.swat[lang]}</td><td class="max-value-col">920</td></tr>
                        <tr class="flak-row"><td class="item-col">${data.items.flak[lang]}</td><td class="max-value-col">800</td></tr>
                        <tr class="chitin-row"><td class="item-col">${data.items.chitin[lang]}</td><td class="max-value-col">400</td></tr>
                        <tr class="fur-row"><td class="item-col">${data.items.fur[lang]}</td><td class="max-value-col">320</td></tr>
                        <tr class="ghillie-row"><td class="item-col">${data.items.ghillie[lang]}</td><td class="max-value-col">256</td></tr>
                    </tbody>
                </table>
                <div class="sub-section-title animated-content" style="margin-top: 20px; animation-delay: 200ms">${data.weapon_title[lang]}</div>
                <div class="description animated-content" style="animation-delay: 250ms">${data.weapon_desc[lang]}</div>
                <table class="caps-table animated-content" style="animation-delay: 300ms">
                    <tbody>
                        <tr><td style="color:var(--color-red);">${data.weapon_labels.w[lang]}</td><td class="max-value-col">400 %</td></tr>
                        <tr><td style="color:var(--color-red);">${data.weapon_labels.t[lang]}</td><td class="max-value-col">400 %</td></tr>
                    </tbody>
                </table>
                <div class="sub-section-title animated-content" style="margin-top: 20px; animation-delay: 350ms">${data.saddle_title[lang]}</div>
                <table class="caps-table animated-content" style="animation-delay: 400ms">
                    <tbody>
                        <tr class="crystal-row"><td class="item-col">${data.saddle_all[lang]}</td><td class="max-value-col">200.0</td></tr>
                    </tbody>
                </table>`;
            }

            // --- RESTARTS SPECIAL ---
            if(id === 'restarts') {
                html += `
                <table class="caps-table animated-content" style="animation-delay: 100ms">
                    <thead><tr><th>${data.headers.s[lang]}</th><th style="text-align:center;">${data.headers.t[lang]}</th></tr></thead>
                    <tbody>
                        <tr><td colspan="2" style="background: rgba(229,57,53,0.15); color:var(--color-red); font-weight:700;">${data.cluster_official[lang]}</td></tr>
                        <tr><td>The Island, The Center, Scorched Earth, Aberration, Extinction, Ragnarok, Valguero, Astraeos, Svartalfheim, Lost Colony</td><td class="max-value-col" style="color:var(--color-gold); text-align:center !important;">00:00 & 12:00</td></tr>
                        <tr><td>Community Center, Club Ark</td><td class="max-value-col" style="color:var(--color-gold); text-align:center !important;">00:00 & 12:00</td></tr>

                        <tr><td colspan="2" style="background: rgba(229,57,53,0.15); color:var(--color-red); font-weight:700;">${data.cluster_modmaps[lang]}</td></tr>
                        <tr><td>Svartalfheim, Insaluna, Amissa, Nyrandil, Althemia, Lost City, Forglar, Atlantis, Temptress Lagoon</td><td class="max-value-col" style="color:var(--color-gold); text-align:center !important;">00:00 & 12:00</td></tr>

                        <tr><td colspan="2" style="background: rgba(229,57,53,0.15); color:var(--color-red); font-weight:700;">${data.cluster_overhauls[lang]}</td></tr>
                        <tr><td>Primal Nemesis, Primal Chaos, Descended, Omega, DOX 2</td><td class="max-value-col" style="color:var(--color-gold); text-align:center !important;">00:00 & 12:00</td></tr>
                        
                        <tr><td colspan="2" style="background: rgba(229,57,53,0.15); color:var(--color-red); font-weight:700;">${data.cluster_other[lang]}</td></tr>
                        <tr><td>Minecraft PC, Minecraft Crossplay, Palworld, 7 Days to Die, Soulmask, Valheim, Hytale, Conan Exiles (Savage Wilds, Exiled Lands, Isle of Siptah)</td><td class="max-value-col" style="color:var(--color-gold); text-align:center !important;">00:00 & 12:00</td></tr>
                    </tbody>
                </table>`;
            }

            return html;
        }

        function switchTab(tabId) {
            currentTabId = tabId;
            
            // 1. Alle Header deaktivieren
            document.querySelectorAll('.accordion-header').forEach(el => el.classList.remove('active'));
            // 2. Alle Inhalte ausblenden
            document.querySelectorAll('.accordion-content').forEach(el => el.classList.remove('active'));

            // 3. Aktiv setzen
            const header = document.getElementById('nav-' + tabId);
            const content = document.getElementById('content-' + tabId);

            if(header) header.classList.add('active');
            if(content) {
                content.classList.add('active');
                
                // Animation trigger
                const animatables = content.querySelectorAll('.animated-content');
                animatables.forEach((el) => {
                    el.classList.remove('animated-content');
                    void el.offsetWidth; 
                    el.classList.add('animated-content');
                });
            }
        }

        function toggleLocal(header) {
            const content = header.nextElementSibling;
            header.classList.toggle('active');
            content.classList.toggle('active');
        }

        // Init: Starte mit Deutsch
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage('de');
        });
    </script>
</body>
</html>
